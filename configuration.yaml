#  _    _                                         _     _              _
# | |  | |                          /\           (_)   | |            | |
# | |__| | ___  _ __ ___   ___     /  \   ___ ___ _ ___| |_ __ _ _ __ | |_
# |  __  |/ _ \| '_ ` _ \ / _ \   / /\ \ / __/ __| / __| __/ _` | '_ \| __|
# | |  | | (_) | | | | | |  __/  / ____ \\__ \__ \ \__ \ || (_| | | | | |_
# |_|  |_|\___/|_| |_| |_|\___| /_/    \_\___/___/_|___/\__\__,_|_| |_|\__|
#
# https://www.home-assistant.io/docs/configuration/basic/
homeassistant:
  # Nome do local onde o Home Assistant está sendo executado
  name: Home
  # Localização necessária para calcular a hora em que o sol nasce e se põe
  latitude: !secret lat
  longitude: !secret long
  # Impactos meteorológicos / dados do nascer do sol (altitude acima do nível do mar em metros)
  elevation: 150
  # metric para Metric, imperial para Imperial
  unit_system: metric
  # Escolha o seu aqui: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: America/Sao_Paulo
  # Arquivo de customização
  customize: !include customize.yaml
  # Metodo de autenticação
  auth_providers:
    - type: homeassistant
  # Lista de pastas que podem ser usadas como fontes para o envio de arquivos.
  whitelist_external_dirs:
    - /tmp
    - /config


#  _____
# |  __ \
# | |__) |__ _ __ ___  ___  _ __
# |  ___/ _ \ '__/ __|/ _ \| '_ \
# | |  |  __/ |  \__ \ (_) | | | |
# |_|   \___|_|  |___/\___/|_| |_|
# https://www.home-assistant.io/components/person/
#person:
#  - name: Rudi
#    id: 3nfr8CXF
#    device_trackers:
#      - device_tracker.life360_rudimar_remontti
#  - name: Flavia
#    id: nucnTHSG
#    device_trackers:
#      - device_tracker.life360_flavia_cristine_vendruscolo

# Zonas de localização
#  ______
# |___  /
#    / / ___  _ __   ___
#   / / / _ \| '_ \ / _ \
#  / /_| (_) | | | |  __/
# /_____\___/|_| |_|\___|
# https://www.home-assistant.io/components/zone/
zone:
  - name: "SpeedRS"
    latitude: !secret back_latitude
    longitude: !secret back_longitude
    radius: 130
    icon: mdi:briefcase
  - name: "D.Femme"
    latitude: !secret mj_latitude
    longitude: !secret mj_longitude
    radius: 100
    icon: mdi:briefcase
  - name: Castelinho
    latitude: !secret cas_latitude
    longitude: !secret cas_longitude
    radius: 400
    icon: mdi:home-variant

# Cenas (teste)
#   _____
#  / ____|
# | (___   ___ ___ _ __   ___
#  \___ \ / __/ _ \ '_ \ / _ \
#  ____) | (_|  __/ | | |  __/
# |_____/ \___\___|_| |_|\___|
# https://www.home-assistant.io/components/scene/
scene:
  - name: "Suíte Romantica"
    entities:
      light.yeelight_color1_7c49eb15924b:
        state: true
        rgb_color: [255, 0, 255]
        brightness: 255

# Enables the frontend
#  ______               _                 _
# |  ____|             | |               | |
# | |__ _ __ ___  _ __ | |_ ___ _ __   __| |
# |  __| '__/ _ \| '_ \| __/ _ \ '_ \ / _` |
# | |  | | | (_) | | | | ||  __/ | | | (_| |
# |_|  |_|  \___/|_| |_|\__\___|_| |_|\__,_|
# https://www.home-assistant.io/components/frontend/
frontend:
#  themes: !include themes.yaml
  themes: !include_dir_merge_named themes

#  _____                 _   _____  __
# |  __ \               | | |_   _|/ _|
# | |__) |_ _ _ __   ___| |   | | | |_ _ __ __ _ _ __ ___   ___
# |  ___/ _` | '_ \ / _ \ |   | | |  _| '__/ _` | '_ ` _ \ / _ \
# | |  | (_| | | | |  __/ |  _| |_| | | | | (_| | | | | | |  __/
# |_|   \__,_|_| |_|\___|_| |_____|_| |_|  \__,_|_| |_| |_|\___|
# https://www.home-assistant.io/components/panel_iframe/
#panel_iframe:
#  - name: hassio-main
#    sidebar_title: Configurador
#    sidebar_icon: hass:settings
#    js_url: /api/hassio/app/entrypoint.js
#    url_path: configurator
#    embed_iframe: true
#    require_admin: true
#    config:
#      ingress: core_configurator


# Enables configuration UI
#   _____             __ _
#  / ____|           / _(_)
# | |     ___  _ __ | |_ _  __ _
# | |    / _ \| '_ \|  _| |/ _` |
# | |___| (_) | | | | | | | (_| |
#  \_____\___/|_| |_|_| |_|\__, |
#                           __/ |
#                          |___/
# https://www.home-assistant.io/components/config/
config:
mobile_app:

#default_config:
#[
#    "automation",
#    "cloud",
#    "config",
#    "conversation",
#    "frontend",
#    "history",
#    "logbook",
#    "map",
#    "mobile_app",
#    "person",
#    "script",
#    "sun",
#    "system_health",
#    "updater",
#    "zeroconf"
#]

#  _    _ _   _
# | |  | | | | |
# | |__| | |_| |_ _ __
# |  __  | __| __| '_ \
# | |  | | |_| |_| |_) |
# |_|  |_|\__|\__| .__/
#                |_|
# https://www.home-assistant.io/components/http/
#http:
  #server_port: 55123
  #base_url: !secret url_base
  #ssl_certificate: /ssl/fullchain.pem
  #ssl_key: /ssl/privkey.pem
  #ip_ban_enabled: true
  #login_attempts_threshold: 3
# Segredos são definidos no arquivo secrets.yaml


#  _    _           _       _
# | |  | |         | |     | |
# | |  | |_ __   __| | __ _| |_ ___ _ __
# | |  | | '_ \ / _` |/ _` | __/ _ \ '__|
# | |__| | |_) | (_| | (_| | ||  __/ |
#  \____/| .__/ \__,_|\__,_|\__\___|_|
#        |_|
# https://www.home-assistant.io/components/updater/
updater:
  # Opcional, permite que os desenvolvedores do Home Assistant se concentrem em componentes populares.
  # include_used_components: true


# Descubra alguns dispositivos automaticamente
#  _____  _
# |  __ \(_)
# | |  | |_ ___  ___ _____   _____ _ __ _   _
# | |  | | / __|/ __/ _ \ \ / / _ \ '__| | | |
# | |__| | \__ \ (_| (_) \ V /  __/ |  | |_| |
# |_____/|_|___/\___\___/ \_/ \___|_|   \__, |
#                                        __/ |
#                                       |___/
# https://www.home-assistant.io/components/discovery/
discovery:
  ignore:
    - yeelight

# Permite que você emita comandos de voz do frontend em navegadores ativados
#   _____                                    _   _
#  / ____|                                  | | (_)
# | |     ___  _ ____   _____ _ __ ___  __ _| |_ _  ___  _ __
# | |    / _ \| '_ \ \ / / _ \ '__/ __|/ _` | __| |/ _ \| '_ \
# | |___| (_) | | | \ V /  __/ |  \__ \ (_| | |_| | (_) | | | |
#  \_____\___/|_| |_|\_/ \___|_|  |___/\__,_|\__|_|\___/|_| |_|
# https://www.home-assistant.io/components/conversation/
conversation:

# Armazenamento do Banco de dados
#  _____                        _
# |  __ \                      | |
# | |__) |___  ___ ___  _ __ __| | ___ _ __
# |  _  // _ \/ __/ _ \| '__/ _` |/ _ \ '__|
# | | \ \  __/ (_| (_) | | | (_| |  __/ |
# |_|  \_\___|\___\___/|_|  \__,_|\___|_|
# https://www.home-assistant.io/components/recorder/
recorder:
  purge_keep_days: 1
  db_url: !secret maria_db
  exclude:
    domains:
      - automation
      - updater
    entities:
      - sun.sun
      - sensor.last_boot
      - sensor.date
    event_types:
      - call_service

# Suporte para rastrear mudanças de estado ao longo do tempo
#  _    _ _     _
# | |  | (_)   | |
# | |__| |_ ___| |_ ___  _ __ _   _
# |  __  | / __| __/ _ \| '__| | | |
# | |  | | \__ \ || (_) | |  | |_| |
# |_|  |_|_|___/\__\___/|_|   \__, |
#                             |___/
# https://www.home-assistant.io/components/history/
history:
  exclude:
    domains:
      - updater
      - sun
      - binary_sensor
      - media_player
      - device_tracker
      - input_boolean
      - input_datetime
      - input_number
      - input_select
      - input_text
      - camera
      - script
#     - automation
    entities:
      - sensor.last_boot
      - sensor.date
      - sensor.distancia_d_agua
      - sensor.nivel_real
#     - sensor.vazao_de_agua

# Ver todos os eventos em um diário de bordo
#  _                 _                 _
# | |     ___   __ _| |__   ___   ___ | | __
# | |    / _ \ / _` | '_ \ / _ \ / _ \| |/ /
# | |___| (_) | (_| | |_) | (_) | (_) |   <
# |______\___/ \__, |_.__/ \___/ \___/|_|\_\
#              |___/
# https://www.home-assistant.io/components/logbook/
logbook:
  exclude:
    entities:
      - sensor.last_boot
      - sensor.date
      - sensor.distancia_d_agua
      - sensor.nivel_real
      - sensor.vazao_de_agua
    domains:
      - sun
      - binary_sensor
      - media_player
      - device_tracker
      - input_boolean
      - input_datetime
      - input_number
      - input_select
      - input_text
      - camera
      - script
#     - automation

# Nível de registro de atividades
#  _
# | |     ___   __ _  __ _  ___ _ __
# | |    / _ \ / _` |/ _` |/ _ \ '__|
# | |___| (_) | (_| | (_| |  __/ |
# |______\___/ \__, |\__, |\___|_|
#              |___/ |___/
# https://www.home-assistant.io/components/logger/
logger:
#  default: critical
  default: warning
  logs:
#    homeassistant.core: critical
    homeassistant.components.mqtt: fatal

# Texto em voz
#  _   _
# | | | |
# | |_| |_ ___
# | __| __/ __|
# | |_| |_\__ \
#  \__|\__|___/
# https://www.home-assistant.io/components/tts/
# https://www.home-assistant.io/components/google_translate/
# https://www.home-assistant.io/components/voicerss/
# https://www.home-assistant.io/components/amazon_polly/
tts:
  - platform: google_translate
    language: 'pt-br'
    cache: true
    cache_dir: /tmp/tts
    time_memory: 300
#  - platform: voicerss
#    api_key: !secret voicerss_key
#    language: 'pt-br'
#    format: '44khz_16bit_stereo'
#    # http://www.voicerss.org/personel/statistic.aspx
#  - platform: watson_tts
#    watson_apikey: !secret watson_key
#    #voice: pt-BR_IsabelaVoice
#    voice: pt-BR_IsabelaV3Voice
#  - platform: amazon_polly
#    aws_access_key_id: !secret aws_access_key_id
#    aws_secret_access_key: !secret aws_secret_access_key
#    #text_type: ssml
#    voice: Ricardo
#    #voice: Vitoria
#    region_name: sa-east-1

#   _____ _                 _
#  / ____| |               | |
# | |    | | ___  _   _  __| |
# | |    | |/ _ \| | | |/ _` |
# | |____| | (_) | |_| | (_| |
#  \_____|_|\___/ \__,_|\__,_|
# https://www.home-assistant.io/cloud/
#cloud:

# Localizador
#  _____             _            _                  _
# |  __ \           (_)          | |                | |
# | |  | | _____   ___  ___ ___  | |_ _ __ __ _  ___| | _____ _ __
# | |  | |/ _ \ \ / / |/ __/ _ \ | __| '__/ _` |/ __| |/ / _ \ '__|
# | |__| |  __/\ V /| | (_|  __/ | |_| | | (_| | (__|   <  __/ |
# |_____/ \___| \_/ |_|\___\___|  \__|_|  \__,_|\___|_|\_\___|_|
# https://www.home-assistant.io/components/device_tracker/
# https://www.home-assistant.io/components/google_maps/
device_tracker:
#  - platform: google_maps
#    username: !secret gmail_user
#    password: !secret gmail_senha

# Extrair fluxo de audio (ex youtube)
#  __  __          _ _         ______      _                  _
# |  \/  |        | (_)       |  ____|    | |                | |
# | \  / | ___  __| |_  __ _  | |__  __  _| |_ _ __ __ _  ___| |_ ___  _ __
# | |\/| |/ _ \/ _` | |/ _` | |  __| \ \/ / __| '__/ _` |/ __| __/ _ \| '__|
# | |  | |  __/ (_| | | (_| | | |____ >  <| |_| | | (_| | (__| || (_) | |
# |_|  |_|\___|\__,_|_|\__,_| |______/_/\_\\__|_|  \__,_|\___|\__\___/|_|
media_extractor:

# Media Players
#  __  __          _ _         _____  _
# |  \/  |        | (_)       |  __ \| |
# | \  / | ___  __| |_  __ _  | |__) | | __ _ _   _  ___ _ __
# | |\/| |/ _ \/ _` | |/ _` | |  ___/| |/ _` | | | |/ _ \ '__|
# | |  | |  __/ (_| | | (_| | | |    | | (_| | |_| |  __/ |
# |_|  |_|\___|\__,_|_|\__,_| |_|    |_|\__,_|\__, |\___|_|
#                                             |___/
# https://www.home-assistant.io/components/media_extractor/
# https://github.com/smartHomeHub/SmartIR
media_player:
  - platform: spotify
    client_id: !secret spotify_client_id
    client_secret: !secret spotify_client_secret
#  - platform: lg_netcast
#    name: "LG Smart TV"
#    host: 192.168.87.13
#    access_token: 431855


# https://www.home-assistant.io/integrations/webostv/
#webostv:
#  host: 192.168.87.250
#  name: TV Estar

# Casts (google home mini/chrome cast)
#   _____          _
#  / ____|        | |
# | |     __ _ ___| |_
# | |    / _` / __| __|
# | |___| (_| \__ \ |_
#  \_____\__,_|___/\__|
# https://www.home-assistant.io/components/cast/
cast:

# Mosquito
#  __  __       _   _
# |  \/  |     | | | |
# | \  / | __ _| |_| |_
# | |\/| |/ _` | __| __|
# | |  | | (_| | |_| |_
# |_|  |_|\__, |\__|\__|
#            |_|
# https://www.home-assistant.io/components/mqtt/
# https://www.home-assistant.io/addons/mosquitto/
mqtt:
  broker: 192.168.87.5
  port: 1883
  client_id: home-assistant-1
  username: !secret mqtt_username
  password: !secret mqtt_password
#  discovery: true
#  discovery_prefix: homeassistant


# Mostrando a localização de dispositivos rastreados no mapa
#  __  __
# |  \/  |
# | \  / | __ _ _ __
# | |\/| |/ _` | '_ \
# | |  | | (_| | |_) |
# |_|  |_|\__,_| .__/
#              |_|
# https://www.home-assistant.io/components/map/
map:

# Acompanhe o sol
#   _____
#  / ____|
# | (___  _   _ _ __
#  \___ \| | | | '_ \
#  ____) | |_| | | | |
# |_____/ \__,_|_| |_|
# https://www.home-assistant.io/components/sun/
sun:

# Sensores
#   _____
#  / ____|
# | (___   ___ _ __  ___  ___  _ __
#  \___ \ / _ \ '_ \/ __|/ _ \| '__|
#  ____) |  __/ | | \__ \ (_) | |
# |_____/ \___|_| |_|___/\___/|_|
# https://www.home-assistant.io/components/sensor/
# https://www.home-assistant.io/components/sensor.mqtt/
# https://www.home-assistant.io/components/darksky/
# https://www.home-assistant.io/components/moon/
# https://www.home-assistant.io/components/time_date/
# https://www.home-assistant.io/components/systemmonitor/
# https://www.home-assistant.io/components/filesize/
# https://www.home-assistant.io/components/sql/
# https://www.home-assistant.io/components/template/
# https://www.home-assistant.io/components/integration/
# https://www.home-assistant.io/components/statistics/
sensor:
  - platform: mqtt
    name: "Suite Temperatura"
    device_class: temperature
    state_topic: "tele/sonoff26/SENSOR"
    value_template: "{{ value_json['DHT11'].Temperature }}"
    unit_of_measurement: "°C"
  - platform: mqtt
    name: "Suite Umidade"
    device_class: humidity
    state_topic: "tele/sonoff26/SENSOR"
    value_template: "{{ value_json['DHT11'].Humidity }}"
    unit_of_measurement: "%"
  - platform: mqtt
    name: "Cozinha Temperatura"
    device_class: temperature
    state_topic: "tele/sonoff23/SENSOR"
    value_template: "{{ value_json['DHT11'].Temperature }}"
    unit_of_measurement: "°C"
  - platform: mqtt
    name: "Cozinha Umidade"
    device_class: humidity
    state_topic: "tele/sonoff23/SENSOR"
    value_template: "{{ value_json['DHT11'].Humidity }}"
    unit_of_measurement: "%"
  - platform: mqtt
    name: "Banheiro Social Temperatura"
    device_class: temperature
    state_topic: "tele/sonoff24/SENSOR"
    value_template: "{{ value_json['DHT11'].Temperature }}"
    unit_of_measurement: "°C"
  - platform: mqtt
    name: "Banheiro Social Umidade"
    device_class: humidity
    state_topic: "tele/sonoff24/SENSOR"
    value_template: "{{ value_json['DHT11'].Humidity }}"
    unit_of_measurement: "%"
  - platform: mqtt
    name: "Banheiro Suíte Temperatura"
    device_class: temperature
    state_topic: "tele/sonoff09/SENSOR"
    value_template: "{{ value_json['AM2301'].Temperature }}"
    unit_of_measurement: "°C"
  - platform: mqtt
    name: "Banheiro Suíte Umidade"
    device_class: humidity
    state_topic: "tele/sonoff09/SENSOR"
    value_template: "{{ value_json['AM2301'].Humidity }}"
    unit_of_measurement: "%"
#  - platform: yr
  - platform: darksky
    api_key: !secret api_darksky
    language: 'pt'
    units: ca
    monitored_conditions:
      - temperature
      - wind_speed
      - cloud_cover
      - humidity
      - pressure
      - visibility
      - hourly_summary
      - daily_summary
      - uv_index
  - platform: moon
  - platform: time_date
    display_options:
      - 'time'
      - 'date'
  - platform: systemmonitor
    resources:
      - type: disk_free
        arg: /
      - type: disk_use
        arg: /
      - type: disk_use_percent
        arg: /
      - type: memory_free
      - type: memory_use
      - type: memory_use_percent
      - type: processor_use
      - type: last_boot
#  - platform: filesize
#    file_paths:
#      - /config/home-assistant_v2.db
  - platform: sql
    db_url: !secret maria_db
    queries:
      - name: DB size
        query: 'SELECT table_schema "database", Round(Sum(data_length + index_length) / 1048576, 1) "value" FROM information_schema.tables WHERE table_schema="homeassistant" GROUP BY table_schema;'
        column: 'value'
        unit_of_measurement: MB
  - platform: uptime
    name: Uptime
  - platform: version
    name: Versao
  - platform: command_line
    name: CPU Temperatura
    command: "cat /sys/class/thermal/thermal_zone0/temp"
    unit_of_measurement: "°C"
    value_template: '{{ value | multiply(0.001) | round(1) }}'

# PZEM
  - platform: mqtt
    name: "Watts"
    state_topic: "tele/sonoff27/SENSOR"
    value_template: "{{ value_json.ENERGY.Power }}"
    unit_of_measurement: "W"
    icon: mdi:power-plug
  - platform: mqtt
    name: "Voltagem"
    state_topic: "tele/sonoff27/SENSOR"
    value_template: "{{ value_json.ENERGY.Voltage }}"
    unit_of_measurement: "V"
    icon: mdi:flash
  - platform: mqtt
    name: "Corrente"
    state_topic: "tele/sonoff27/SENSOR"
    value_template: "{{ value_json.ENERGY.Current }}"
    unit_of_measurement: "A"
    icon: mdi:current-ac
  - platform: mqtt
    name: "Frequencia"
    state_topic: "tele/sonoff27/SENSOR"
    value_template: "{{ value_json.ENERGY.Frequency }}"
    unit_of_measurement: "Hz"
    icon: mdi:current-dc
  - platform: mqtt
    name: "Potência aparente"
    state_topic: "tele/sonoff27/SENSOR"
    value_template: "{{ value_json.ENERGY.ApparentPower }}"
    unit_of_measurement: "VA"
    icon: mdi:square-outline
  - platform: mqtt
    name: "Potência reativa"
    state_topic: "tele/sonoff27/SENSOR"
    value_template: "{{ value_json.ENERGY.ReactivePower }}"
    unit_of_measurement: "VAr"
    icon: mdi:square-outline
  - platform: mqtt
    name: "Fator Potência"
    state_topic: "tele/sonoff27/SENSOR"
    value_template: "{{ value_json.ENERGY.Factor }}"
    icon: mdi:percent
  - platform: mqtt
    name: "Consumo Diário"
    state_topic: "tele/sonoff27/SENSOR"
    value_template: "{{ value_json.ENERGY.Today }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: mqtt
    name: "Consumo dia Anterior"
    state_topic: "tele/sonoff27/SENSOR"
    value_template: "{{ value_json.ENERGY.Yesterday }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: mqtt
    name: "Consumo Total"
    state_topic: "tele/sonoff27/SENSOR"
    value_template: "{{ value_json.ENERGY.Total }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
#  - platform: integration
#    source: sensor.watts
#    name: Energia Gasta
#    unit_prefix: k
#    round: 3
# SonoffPowR2 Máquina de Lavar
  - platform: mqtt
    name: "Watts Lava e Seca"
    state_topic: "tele/sonoffpow/SENSOR"
    value_template: "{{ value_json.ENERGY.Power }}"
    unit_of_measurement: "W"
    icon: mdi:power-plug
  - platform: mqtt
    name: "Voltagem Lava e Seca"
    state_topic: "tele/sonoffpow/SENSOR"
    value_template: "{{ value_json.ENERGY.Voltage }}"
    unit_of_measurement: "V"
    icon: mdi:flash
  - platform: mqtt
    name: "Corrente Lava e Seca"
    state_topic: "tele/sonoffpow/SENSOR"
    value_template: "{{ value_json.ENERGY.Current }}"
    unit_of_measurement: "A"
    icon: mdi:current-ac
  - platform: mqtt
    name: "Consumo Diário Lava e Seca"
    state_topic: "tele/sonoffpow/SENSOR"
    value_template: "{{ value_json.ENERGY.Today }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: mqtt
    name: "Consumo dia Anterior Lava e Seca"
    state_topic: "tele/sonoffpow/SENSOR"
    value_template: "{{ value_json.ENERGY.Yesterday }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: mqtt
    name: "Consumo Total Lava e Seca"
    state_topic: "tele/sonoffpow/SENSOR"
    value_template: "{{ value_json.ENERGY.Total }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
#  - platform: mqtt
#    name: "Frequencia Lava e Seca"
#    state_topic: "tele/sonoffpow/SENSOR"
#    value_template: "{{ value_json.ENERGY.Frequency }}"
#    unit_of_measurement: "Hz"
#    icon: mdi:current-dc
#  - platform: mqtt
#    name: "Potência aparente Lava e Seca"
#    state_topic: "tele/sonoffpow/SENSOR"
#    value_template: "{{ value_json.ENERGY.ApparentPower }}"
#    unit_of_measurement: "VA"
#    icon: mdi:square-outline
#  - platform: mqtt
#    name: "Potência reativa Lava e Seca"
#    state_topic: "tele/sonoffpow/SENSOR"
#    value_template: "{{ value_json.ENERGY.ReactivePower }}"
#    unit_of_measurement: "VAr"
#    icon: mdi:square-outline
#  - platform: mqtt
#    name: "Fator Potência Lava e Seca"
#    state_topic: "tele/sonoffpow/SENSOR"
#    value_template: "{{ value_json.ENERGY.Factor }}"
#    icon: mdi:percent
  - platform: integration
    source: sensor.watts_lava_e_seca
    name: Energia Gasta Lava e Seca
    unit_prefix: k
    round: 3
# powgeladeiraR2 Geladeira
  - platform: mqtt
    name: "Watts Geladeira"
    state_topic: "tele/powgeladeira/SENSOR"
    value_template: "{{ value_json.ENERGY.Power }}"
    unit_of_measurement: "W"
    icon: mdi:power-plug
  - platform: mqtt
    name: "Voltagem Geladeira"
    state_topic: "tele/powgeladeira/SENSOR"
    value_template: "{{ value_json.ENERGY.Voltage }}"
    unit_of_measurement: "V"
    icon: mdi:flash
  - platform: mqtt
    name: "Corrente Geladeira"
    state_topic: "tele/powgeladeira/SENSOR"
    value_template: "{{ value_json.ENERGY.Current }}"
    unit_of_measurement: "A"
    icon: mdi:current-ac
  - platform: mqtt
    name: "Consumo Diário Geladeira"
    state_topic: "tele/powgeladeira/SENSOR"
    value_template: "{{ value_json.ENERGY.Today }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: mqtt
    name: "Consumo dia Anterior Geladeira"
    state_topic: "tele/powgeladeira/SENSOR"
    value_template: "{{ value_json.ENERGY.Yesterday }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: mqtt
    name: "Consumo Total Geladeira"
    state_topic: "tele/powgeladeira/SENSOR"
    value_template: "{{ value_json.ENERGY.Total }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
#  - platform: mqtt
#    name: "Frequencia Geladeira"
#    state_topic: "tele/powgeladeira/SENSOR"
#    value_template: "{{ value_json.ENERGY.Frequency }}"
#    unit_of_measurement: "Hz"
#    icon: mdi:current-dc
#  - platform: mqtt
#    name: "Potência aparente Geladeira"
#    state_topic: "tele/powgeladeira/SENSOR"
#    value_template: "{{ value_json.ENERGY.ApparentPower }}"
#    unit_of_measurement: "VA"
#    icon: mdi:square-outline
#  - platform: mqtt
#    name: "Potência reativa Geladeira"
#    state_topic: "tele/powgeladeira/SENSOR"
#    value_template: "{{ value_json.ENERGY.ReactivePower }}"
#    unit_of_measurement: "VAr"
#    icon: mdi:square-outline
#  - platform: mqtt
#    name: "Fator Potência Geladeira"
#    state_topic: "tele/powgeladeira/SENSOR"
#    value_template: "{{ value_json.ENERGY.Factor }}"
#    icon: mdi:percent
  - platform: integration
    source: sensor.watts_geladeira
    name: Energia Gasta Geladeira
    unit_prefix: k
    round: 3

# powpurificadorR2 Purificador
  - platform: mqtt
    name: "Watts Purificador"
    state_topic: "tele/powpurificador/SENSOR"
    value_template: "{{ value_json.ENERGY.Power }}"
    unit_of_measurement: "W"
    icon: mdi:power-plug
  - platform: mqtt
    name: "Voltagem Purificador"
    state_topic: "tele/powpurificador/SENSOR"
    value_template: "{{ value_json.ENERGY.Voltage }}"
    unit_of_measurement: "V"
    icon: mdi:flash
  - platform: mqtt
    name: "Corrente Purificador"
    state_topic: "tele/powpurificador/SENSOR"
    value_template: "{{ value_json.ENERGY.Current }}"
    unit_of_measurement: "A"
    icon: mdi:current-ac
  - platform: mqtt
    name: "Consumo Diário Purificador"
    state_topic: "tele/powpurificador/SENSOR"
    value_template: "{{ value_json.ENERGY.Today }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: mqtt
    name: "Consumo dia Anterior Purificador"
    state_topic: "tele/powpurificador/SENSOR"
    value_template: "{{ value_json.ENERGY.Yesterday }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: mqtt
    name: "Consumo Total Purificador"
    state_topic: "tele/powpurificador/SENSOR"
    value_template: "{{ value_json.ENERGY.Total }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: integration
    source: sensor.watts_purificador
    name: Energia Gasta Purificador
    unit_prefix: k
    round: 3

# powcervejaR2 Cervejeira
  - platform: mqtt
    name: "Watts Cervejeira"
    state_topic: "tele/powcerveja/SENSOR"
    value_template: "{{ value_json.ENERGY.Power }}"
    unit_of_measurement: "W"
    icon: mdi:power-plug
  - platform: mqtt
    name: "Voltagem Cervejeira"
    state_topic: "tele/powcerveja/SENSOR"
    value_template: "{{ value_json.ENERGY.Voltage }}"
    unit_of_measurement: "V"
    icon: mdi:flash
  - platform: mqtt
    name: "Corrente Cervejeira"
    state_topic: "tele/powcerveja/SENSOR"
    value_template: "{{ value_json.ENERGY.Current }}"
    unit_of_measurement: "A"
    icon: mdi:current-ac
  - platform: mqtt
    name: "Consumo Diário Cervejeira"
    state_topic: "tele/powcerveja/SENSOR"
    value_template: "{{ value_json.ENERGY.Today }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: mqtt
    name: "Consumo dia Anterior Cervejeira"
    state_topic: "tele/powcerveja/SENSOR"
    value_template: "{{ value_json.ENERGY.Yesterday }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: mqtt
    name: "Consumo Total Cervejeira"
    state_topic: "tele/powcerveja/SENSOR"
    value_template: "{{ value_json.ENERGY.Total }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: integration
    source: sensor.watts_cervejeira
    name: Energia Gasta Cervejeira
    unit_prefix: k
    round: 3

# powpiscinaR2 Piscina
  - platform: mqtt
    name: "Watts Piscina"
    state_topic: "tele/powpiscina/SENSOR"
    value_template: "{{ value_json.ENERGY.Power }}"
    unit_of_measurement: "W"
    icon: mdi:power-plug
  - platform: mqtt
    name: "Voltagem Piscina"
    state_topic: "tele/powpiscina/SENSOR"
    value_template: "{{ value_json.ENERGY.Voltage }}"
    unit_of_measurement: "V"
    icon: mdi:flash
  - platform: mqtt
    name: "Corrente Piscina"
    state_topic: "tele/powpiscina/SENSOR"
    value_template: "{{ value_json.ENERGY.Current }}"
    unit_of_measurement: "A"
    icon: mdi:current-ac
  - platform: mqtt
    name: "Consumo Diário Piscina"
    state_topic: "tele/powpiscina/SENSOR"
    value_template: "{{ value_json.ENERGY.Today }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: mqtt
    name: "Consumo dia Anterior Piscina"
    state_topic: "tele/powpiscina/SENSOR"
    value_template: "{{ value_json.ENERGY.Yesterday }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
  - platform: mqtt
    name: "Consumo Total Piscina"
    state_topic: "tele/powpiscina/SENSOR"
    value_template: "{{ value_json.ENERGY.Total }}"
    unit_of_measurement: "kWh"
    icon: mdi:counter
#  - platform: mqtt
#    name: "Frequencia Piscina"
#    state_topic: "tele/powpiscina/SENSOR"
#    value_template: "{{ value_json.ENERGY.Frequency }}"
#    unit_of_measurement: "Hz"
#    icon: mdi:current-dc
#  - platform: mqtt
#    name: "Potência aparente Piscina"
#    state_topic: "tele/powpiscina/SENSOR"
#    value_template: "{{ value_json.ENERGY.ApparentPower }}"
#    unit_of_measurement: "VA"
#    icon: mdi:square-outline
#  - platform: mqtt
#    name: "Potência reativa Piscina"
#    state_topic: "tele/powpiscina/SENSOR"
#    value_template: "{{ value_json.ENERGY.ReactivePower }}"
#    unit_of_measurement: "VAr"
#    icon: mdi:square-outline
#  - platform: mqtt
#    name: "Fator Potência Piscina"
#    state_topic: "tele/powpiscina/SENSOR"
#    value_template: "{{ value_json.ENERGY.Factor }}"
#    icon: mdi:percent
  - platform: integration
    source: sensor.watts_Piscina
    name: Energia Gasta Piscina
    unit_prefix: k
    round: 3
# Contador de vezes que as luzes foram ligadas
  - platform: history_stats
    name: "Corredor (Contador)"
    entity_id: light.luz_do_corredor
    state: 'on'
    type: count
    start: '{{ now().replace(hour=0).replace(minute=0).replace(second=0) }}'
    end: '{{ now() }}'
  - platform: history_stats
    name: "Banheiro Social (Contador)"
    entity_id: light.luz_do_banheiro_social
    state: 'on'
    type: count
    start: '{{ now().replace(hour=0).replace(minute=0).replace(second=0) }}'
    end: '{{ now() }}'
  - platform: history_stats
    name: "Banheiro da suite (Contador)"
    entity_id: light.luz_do_banheiro_da_suite
    state: 'on'
    type: count
    start: '{{ now().replace(hour=0).replace(minute=0).replace(second=0) }}'
    end: '{{ now() }}'
  - platform: history_stats
    name: "Lavabo (Contador)"
    entity_id: light.luz_do_lavabo
    state: 'on'
    type: count
    start: '{{ now().replace(hour=0).replace(minute=0).replace(second=0) }}'
    end: '{{ now() }}'

# Porta Geladeira
  - platform: history_stats
    name: Geladeira vezes aberta
    entity_id: binary_sensor.porta_geladeira
    state: 'on'
    type: count
    start: '{{ now().replace(hour=0).replace(minute=0).replace(second=0) }}'
    end: '{{ now() }}'
#  - platform: history_stats
#    name: Geladeira tempo aberta
#    entity_id: binary_sensor.porta_geladeira
#    state: 'on'
#    type: time
#    start: '{{ now().replace(hour=0).replace(minute=0).replace(second=0) }}'
#    end: '{{ now() }}'

# Captura trafego na WAN do Roteador RB2011
  - platform: snmp
    name: 'ether1_wan_in'
    host: 192.168.10.1
    baseoid: 1.3.6.1.2.1.31.1.1.1.6.1
    community: 'public'
    version: '2c'
    #scan_interval: 10
  - platform: snmp
    name: 'ether1_wan_out'
    host: 192.168.10.1
    baseoid: 1.3.6.1.2.1.31.1.1.1.10.1
    community: 'public'
    version: '2c'
    #scan_interval: 10
  - platform: statistics
    name: 'WAN In'
    entity_id: sensor.internet_speed_in
    max_age:
      hours: 12
  - platform: statistics
    name: 'WAN Out'
    entity_id: sensor.internet_speed_out
    max_age:
      hours: 12

  - platform: mqtt
    state_topic: 'SensorAgua/contagem'
    name: 'Vazão de água'
    icon: "mdi:water-pump"
    unit_of_measurement: 'litros'
    value_template: '{{ value_json.vazao }}'
  - platform: mqtt
    state_topic: 'SensorAgua/contagem'
    name: 'Vazão de água Min'
    icon: "mdi:water"
    unit_of_measurement: 'litros/min'
    value_template: '{{ value_json.consumo_agua }}'
  - platform: mqtt
    state_topic: 'SensorAgua/contagem'
    name: "Distancia D'água"
    icon: "mdi:ruler"
    unit_of_measurement: 'cm'
    value_template: '{{ value_json.distancia }}'

# Sensores baseado em Templates
  - platform: template
    sensors:
      despert1_hora:
        value_template: '{{ states.input_number.despert1_hora.state | int }}'
      despert1_minuto:
        value_template: '{{ states.input_number.despert1_minuto.state | int }}'
      despert1_despertar:
        friendly_name: 'Alarmes definidos para'
        icon_template: mdi:alarm-bell
        value_template: >-
          {{ states.sensor.despert1_hora.state }}:
          {%- if states.sensor.despert1_minuto.state|length == 1 -%}
            0
          {%- endif -%}
            {{ states.sensor.despert1_minuto.state }}
      despert1_despertar_automacao:
        value_template: >-
          {% if states.sensor.despert1_hora.state|length == 1 -%}
            0
          {%- endif -%}
            {{ states.sensor.despert1_hora.state }}:
          {%- if states.sensor.despert1_minuto.state|length == 1 -%}
            0
          {%- endif -%}
            {{ states.sensor.despert1_minuto.state }}
      despert2_hora:
        value_template: '{{ states.input_number.despert2_hora.state | int }}'
      despert2_minuto:
        value_template: '{{ states.input_number.despert2_minuto.state | int }}'
      despert2_despertar:
        friendly_name: 'Alarmes definidos para'
        icon_template: mdi:alarm-bell
        value_template: >-
          {{ states.sensor.despert2_hora.state }}:
          {%- if states.sensor.despert2_minuto.state|length == 1 -%}
            0
          {%- endif -%}
            {{ states.sensor.despert2_minuto.state }}
      despert2_despertar_automacao:
        value_template: >-
          {% if states.sensor.despert2_hora.state|length == 1 -%}
            0
          {%- endif -%}
            {{ states.sensor.despert2_hora.state }}:
          {%- if states.sensor.despert2_minuto.state|length == 1 -%}
            0
          {%- endif -%}
            {{ states.sensor.despert2_minuto.state }}
      pordosol:
        friendly_name: Por do sol
        value_template: '{{ as_timestamp(states.sun.sun.attributes.next_setting) | timestamp_custom("%H:%M") }}'
      nascerdosol:
        friendly_name: Nascer do sol
        value_template: '{{ as_timestamp(states.sun.sun.attributes.next_rising) | timestamp_custom("%H:%M") }}'
      anoiteceu:
        friendly_name: Anoiteceu
        icon_template: 'mdi:clock'
        value_template: '{{ ((as_timestamp(states.sun.sun.attributes.next_setting) | int + (float(states.input_number.anoitecer.state) * 60)) | timestamp_custom("%H:%M")) }}'
      bateria_rudi:
        friendly_name: Bateria Rudi
        icon_template: mdi:battery
        unit_of_measurement: '%'
        value_template:  '{{ states.device_tracker.life360_rudimar_remontti.attributes.battery|int }}'
        device_class: battery
      bateria_rudi_st:
        value_template:  '{{ states.device_tracker.life360_rudimar_remontti.attributes.battery_charging }}'
        device_class: battery
      bateria_flavia:
        friendly_name: Bateria Flavia
        icon_template: mdi:battery
        unit_of_measurement: "%"
        value_template:  '{{ states.device_tracker.life360_flavia_cristine_vendruscolo.attributes.battery|int }}'
        device_class: battery
      bateria_flavia_st:
        value_template:  '{{ states.device_tracker.life360_flavia_cristine_vendruscolo.attributes.battery_charging }}'
        device_class: battery
      bateria_status_rudi:
        friendly_name: Status Bateria Rudi
        value_template: >-
          {% if is_state('sensor.bateria_rudi_st', "False") %}
            Descarregando
          {% else %}
            Carregando
          {% endif %}
        icon_template: >-
          {% if is_state('sensor.bateria_rudi_st', "False") %}
            mdi:battery-50
          {% else %}
            mdi:battery-charging
          {% endif %}
      bateria_status_flavia:
        friendly_name: Status Bateria Flavia
        value_template: >-
          {% if is_state('sensor.bateria_flavia_st', "False") %}
            Descarregando
          {% else %}
            Carregando
          {% endif %}
        icon_template: >-
          {% if is_state('sensor.bateria_flavia_st', "False") %}
            mdi:battery-50
          {% else %}
            mdi:battery-charging
          {% endif %}

### TESTE -------------------------------------------
      status_rudi:
        friendly_name: "Localização Rudi"
        value_template: >-
           {% if is_state('device_tracker.life360_rudimar_remontti', 'driving') %}
             Dirigindo
           {% elif is_state('device_tracker.life360_rudimar_remontti', 'moving') %}
             Caminhando
           {% elif states.device_tracker.life360_rudimar_remontti.attributes.place == none %}
             Ausente
           {% else %}
             {{ state_attr('device_tracker.life360_rudimar_remontti', 'place') }}
           {% endif %}
        entity_id: device_tracker.life360_rudimar_remontti
      status_flavia:
        friendly_name: "Localização Flávia"
        value_template: >-
           {% if is_state('device_tracker.life360_flavia_cristine_vendruscolo', 'driving') %}
             Dirigindo
           {% elif is_state('device_tracker.life360_flavia_cristine_vendruscolo', 'moving') %}
             Caminhando
           {% elif states.device_tracker.life360_flavia_cristine_vendruscolo.attributes.place == none %}
             Ausente
           {% else %}
             {{ state_attr('device_tracker.life360_flavia_cristine_vendruscolo', 'place') }}
           {% endif %}
        entity_id: device_tracker.life360_flavia_cristine_vendruscolo

      donos_em_casa:
        friendly_name: "Donos em casa"
        value_template: >-
           {% if is_state('group.all_devices', 'not_home') %}
             off
           {% elif is_state('group.all_devices', 'unknown') %}
             off
           {% else %}
             on
           {% endif %}
        icon_template: >-
          {% if is_state('group.all_devices', 'not_home') %}
            mdi:thumb-down-outline
          {% elif is_state('group.all_devices', 'unknown') %}
            mdi:thumb-down-outline
          {% else %}
            mdi:thumb-up-outline
          {% endif %}
        entity_id: group.all_devices

      status_abastecimento_agua:
        friendly_name: "Abastecimento de água"
        value_template: >-
           {% if states('sensor.caixa_dagua')|float < 95 %}
             Faltou
           {% else %}
             Normal
           {% endif %}
        icon_template: >-
          {% if states('sensor.caixa_dagua')|float < 95 %}
            mdi:water-pump-off
          {% else %}
            mdi:water-pump
          {% endif %}
        entity_id: sensor.caixa_dagua

      status_caixa_dagua:
        friendly_name: "Status da boia da caixa d'água"
        value_template: >-
           {% if states('sensor.vazao_de_agua')|float > 0 %}
             Enchendo
           {% else %}             
             Parada
           {% endif %}
        icon_template: >-
          {% if states('sensor.vazao_de_agua')|float > 0 %}
            mdi:water
          {% else %}
            mdi:water-off
          {% endif %}
        entity_id: sensor.caixa_dagua

### TESTE -------------------------------------------

#      precisa_trabalhar:
#        friendly_name: Precisa Trabalhar Hoje
#        value_template: >-
#          {% if is_state('binary_sensor.trabalhando', 'on') %}
#            Sim
#          {% else %}
#            Não
#          {% endif %}
#        icon_template: >-
#          {% if is_state('binary_sensor.trabalhando', 'on') %}
#            mdi:thumb-up-outline
#          {% else %}
#            mdi:thumb-down-outline
#          {% endif %}

      # Consumo geral da casa (mqtt)
      energia_gasta_dia:
        friendly_name: "Gasto no dia"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_diario.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_ontem:
        friendly_name: "Gasto ontem"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_dia_anterior.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_total:
        friendly_name: "Gasto total"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_total.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      # Consumo geral da casa (HA)
#      gasto_hoje:
#        friendly_name: "Gasto hoje"
#        icon_template: mdi:cash-usd-outline
#        unit_of_measurement: 'R$'
#        value_template: "{{ ( float(states.sensor.kwh_gasto_hoje.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
#      gasto_semanal:
#        friendly_name: "Gasto na semana"
#        icon_template: mdi:cash-usd-outline
#        unit_of_measurement: 'R$'
#        value_template: "{{ ( float(states.sensor.kwh_gasto_semana.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      gasto_mes:
        friendly_name: "Gasto no mês"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.kwh_gasto_mes.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      # Máquina de lavar
      energia_gasta_dia_ml:
        friendly_name: "Lavar e Seca gastou hoje"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_diario_lava_e_seca.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_ontem_ml:
        friendly_name: "Lavar e Seca gastou otem"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_dia_anterior_lava_e_seca.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_semana_ml:
        friendly_name: "Lavar e Seca Gastou na semana"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.kwh_gasto_semana_ml.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_mes_ml:
        friendly_name: "Lavar e Seca Gastou no mês"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.kwh_gasto_mes_ml.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      # Motor da Piscina
      energia_gasta_dia_mp:
        friendly_name: "Piscina gastou hoje"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_diario_piscina.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_ontem_mp:
        friendly_name: "Piscina gastou otem"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_dia_anterior_piscina.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_semana_mp:
        friendly_name: "Piscina Gastou na semana"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.kwh_gasto_semana_mp.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_mes_mp:
        friendly_name: "Piscina Gastou no mês"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.kwh_gasto_mes_mp.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      # Geladeira
      energia_gasta_dia_ge:
        friendly_name: "Geladeira gastou hoje"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_diario_geladeira.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_ontem_ge:
        friendly_name: "Geladeira gastou otem"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_dia_anterior_geladeira.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_semana_ge:
        friendly_name: "Geladeira Gastou na semana"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.kwh_gasto_semana_ge.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_mes_ge:
        friendly_name: "Geladeira Gastou no mês"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.kwh_gasto_mes_ge.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      # Purificador
      energia_gasta_dia_pur:
        friendly_name: "Purificador gastou hoje"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_diario_purificador.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_ontem_pur:
        friendly_name: "Purificador gastou otem"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_dia_anterior_purificador.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_semana_pur:
        friendly_name: "Purificador Gastou na semana"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.kwh_gasto_semana_pur.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_mes_pur:
        friendly_name: "Purificador Gastou no mês"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.kwh_gasto_mes_pur.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      # Cervejeira
      energia_gasta_dia_ceva:
        friendly_name: "Cervejeira gastou hoje"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_diario_cervejeira.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_ontem_ceva:
        friendly_name: "Cervejeira gastou otem"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.consumo_dia_anterior_cervejeira.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_semana_ceva:
        friendly_name: "Cervejeira Gastou na semana"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.kwh_gasto_semana_ceva.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"
      energia_gasta_mes_ceva:
        friendly_name: "Cervejeira Gastou no mês"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.kwh_gasto_mes_ceva.state) * float(states.input_text.text_valor_kwh.state) ) | round(2) }}"

#      yr_previsao:
#        friendly_name: "Clima"
#        value_template: '{%set list2 = "0","Céu Limpo","Bom","Parcialmente Nublado","Nublado","Pancadas de Chuva","Pancadas de Chuva e Trovão","Granizo com efeito de Chuva","Chuvisco","Chuva","Chuva Pesada","Chuva Pesada e Trovão","Granizo","Neve","Neve e Trovão","Névoa","0","0","0","0","Chuvisco e Trovão","Chuvisco de Neve e Trovaão","Chuva e Trovão","Granizo e Trovão","Chuva Leve e Trovão","Chuva Forte e Trovão","Chuvisco Leve e Trovão","Chuvisco Forte e Trovão","Névoa Leve e Trovão","Névoa Pesada e Trovão","Chuva Leve e Trovão","Granizo Leve e Trovão","Granizo Forte e Trovão","Pouca Neve e Trovão","Muita Neve e Trovão","0","0","0","0","0","Chuva Leve","Chuva Forte","Chuvisco Leve","Chuvisco Forte","Nevasca Leve","Nevasca Pesada","Chuva Leve","Granizo Leve","Granizo Pesado","Neve Leve","Neve Pesada"%}{{list2[states.sensor.yr_symbol.state|int]}}'
#        entity_picture_template: "{{ state_attr('sensor.yr_symbol','entity_picture') }}"
      maquina_lavar_status:
        friendly_name_template: Status Máquina de Lavar
        value_template: >-
          {% if states('sensor.watts_lava_e_seca')|float > 3 %}
            Lavando
          {% else %}
            Desligada
          {% endif %}
        icon_template: >-
          {% if states('sensor.watts_lava_e_seca')|float > 3 %}
            mdi:dishwasher
          {% else %}
            mdi:washing-machine
          {% endif %}        
#        entity_picture_template: >-
#          {% if states('sensor.watts_lava_e_seca')|float > 3 %}
#            /local/icons/maquina/lavando.svg
#          {% else %}
#            /local/icons/maquina/desligada.svg
#          {% endif %}
      motor_piscina_status:
        friendly_name_template: Status Motor Piscina
        value_template: >-
          {% if is_state('switch.motor_da_piscina', 'off') %}
            Desligado
          {% elif states('sensor.watts_piscina')|float > 2 %}
            Ligado
          {% else %}
            Standby
          {% endif %}
        icon_template: >-
          {% if is_state('switch.motor_da_piscina', 'off') %}
            mdi:power-off
          {% elif states('sensor.watts_piscina')|float > 2 %}
            mdi:power
          {% else %}
            mdi:power-cycle
          {% endif %}
      geladeira_status:
        friendly_name_template: Status Geladeira
        value_template: >-
          {% if is_state('switch.geladeira', 'off') %}
            Desligada
          {% elif states('sensor.watts_geladeira')|float > 4 %}
            Ligada
          {% else %}
            Standby
          {% endif %}
        icon_template: >-
          {% if is_state('switch.geladeira', 'off') %}
            mdi:power-off
          {% elif states('sensor.watts_geladeira')|float > 4 %}
            mdi:power
          {% else %}
            mdi:power-cycle
          {% endif %}

      cervejeira_status:
        friendly_name_template: Status Cervejeira
        value_template: >-
          {% if is_state('switch.cervejeira', 'off') %}
            Desligada
          {% elif states('sensor.watts_cervejeira')|float > 4 %}
            Ligada
          {% else %}
            Standby
          {% endif %}
        icon_template: >-
          {% if is_state('switch.cervejeira', 'off') %}
            mdi:power-off
          {% elif states('sensor.watts_cervejeira')|float > 4 %}
            mdi:power
          {% else %}
            mdi:power-cycle
          {% endif %}

      purificador_status:
        friendly_name_template: Status Purificador
        value_template: >-
          {% if is_state('switch.purificador', 'off') %}
            Desligada
          {% elif states('sensor.watts_purificador')|float > 4 %}
            Ligada
          {% else %}
            Standby
          {% endif %}
        icon_template: >-
          {% if is_state('switch.purificador', 'off') %}
            mdi:power-off
          {% elif states('sensor.watts_purificador')|float > 4 %}
            mdi:power
          {% else %}
            mdi:power-cycle
          {% endif %}

#Caixa dágua
      # Desconta o espaco da tampa ate a agua que no meu caso é 27cm
      nivel_real_variavel:
        friendly_name_template: "Nível Real Var"
        unit_of_measurement: 'cm'
        icon_template: 'mdi:waves'
        value_template: "{{ ( float(states.sensor.distancia_d_agua.state) - 26 ) }}" 

      # Evita valor negativos
      nivel_real:
        friendly_name_template: "Nível Real"
        unit_of_measurement: 'cm'
        icon_template: 'mdi:waves'
        value_template: >-
          {% if states('sensor.nivel_real_variavel')|float < 1 %}
            0
          {% else %}
            {{ states('sensor.nivel_real_variavel') }}
          {% endif %}

      # Centimetros Real * 100 / 56cm que é o total qnd vazia
      caixa_dagua:
        friendly_name_template: "Caixa D'água"
        unit_of_measurement: '%'
        icon_template: 'mdi:waves'
        value_template: "{{ (100 - ( float(states.sensor.nivel_real.state) * 100 / 56 )) | round(2) }}" 

      # Logo se em 61 cm tem 2000 litros, logo 2000/61 = 32,7868852459
      caixa_dagua_litros:
        friendly_name_template: "Caixa D'água"
        unit_of_measurement: 'L'
        icon_template: 'mdi:cup-water'
        value_template: "{{  (2000 - ( float(states.sensor.nivel_real.state) * 32.787 )) | round(0) }}"

      # Gasto com aguas
      agua_gasta_valor_dia:
        friendly_name: "Água gasta hoje"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.agua_gasta_dia.state) * float(states.input_text.text_valor_agua.state) ) | round(2) }}"
      agua_gasta_valor_mes:
        friendly_name: "Água gasta no mês"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.agua_gasta_mes.state) * float(states.input_text.text_valor_agua.state) ) | round(2) }}"
      agua_gasta_valor_semana:
        friendly_name: "Água gasta na semana"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.agua_gasta_semana.state) * float(states.input_text.text_valor_agua.state) ) | round(2) }}"
      agua_gasta_valor_ano:
        friendly_name: "Água gasta no ano"
        icon_template: mdi:cash-usd-outline
        unit_of_measurement: 'R$'
        value_template: "{{ ( float(states.sensor.agua_gasta_ano.state) * float(states.input_text.text_valor_agua.state) ) | round(2) }}"

      internet_speed_in:
        friendly_name: 'Download'
        value_template: '{{ ((states.input_number.internet_delta_in.state | float ) / 1000000 ) | round(2) }}'
        unit_of_measurement: 'Mbps'
        icon_template: 'mdi:download-network'

      internet_speed_out:
        friendly_name: 'Upload'
        value_template: '{{ ((states.input_number.internet_delta_out.state | float ) / 1000000 ) | round(2) }}'
        unit_of_measurement: 'Mbps'
        icon_template: 'mdi:upload-network'



#  _    _ _   _ _ _ _           __  __      _
# | |  | | | (_) (_) |         |  \/  |    | |
# | |  | | |_ _| |_| |_ _   _  | \  / | ___| |_ ___ _
# | |  | | __| | | | __| | | | | |\/| |/ _ \ __/ _ \ '__|
# | |__| | |_| | | | |_| |_| | | |  | |  __/ ||  __/ |
#  \____/ \__|_|_|_|\__|\__, | |_|  |_|\___|\__\___|_|
#                       |___/
# https://www.home-assistant.io/components/utility_meter/

utility_meter:
# Energia geral  
#  kwh_gasto_hoje:
#    source: sensor.consumo_diario
#    cycle: daily
#    offset: '00:00:00'
#    tariffs:
#      - verde
#      - amarela
#      - vermelha
#  kwh_gasto_semana:
#    source: sensor.consumo_diario
#    cycle: weekly
  kwh_gasto_mes:
    source: sensor.consumo_diario
    cycle: monthly
    offset:
      days: 21
      hours: 0
      minutes: 0
# Máquina de Lavar Samsung
  kwh_gasto_semana_ml:
    source: sensor.energia_gasta_lava_e_seca
    cycle: weekly
  kwh_gasto_mes_ml:
    source: sensor.energia_gasta_lava_e_seca
    cycle: monthly
# Motor Piscina
  kwh_gasto_semana_mp:
    source: sensor.energia_gasta_piscina
    cycle: weekly
  kwh_gasto_mes_mp:
    source: sensor.energia_gasta_piscina
    cycle: monthly
# Geladeira
  kwh_gasto_semana_ge:
    source: sensor.energia_gasta_geladeira
    cycle: weekly
  kwh_gasto_mes_ge:
    source: sensor.energia_gasta_geladeira
    cycle: monthly
# Purificador
  kwh_gasto_semana_pur:
    source: sensor.energia_gasta_purificador
    cycle: weekly
  kwh_gasto_mes_pur:
    source: sensor.energia_gasta_purificador
    cycle: monthly
# Cervejeira
  kwh_gasto_semana_ceva:
    source: sensor.energia_gasta_cervejeira
    cycle: weekly
  kwh_gasto_mes_ceva:
    source: sensor.energia_gasta_cervejeira
    cycle: monthly
#Porta Geladeira
  geladeira_x_aberta_mes:
    source: sensor.geladeira_vezes_aberta
    cycle: monthly
#  geladeira_tempo_aberta_mes:
#    source: sensor.geladeira_tempo_aberta
#    cycle: monthly
# Cosumo de Água Vazão
  agua_gasta_dia:
    source: sensor.vazao_de_agua
    cycle: daily
  agua_gasta_dia_min:
    source: sensor.vazao_de_agua_min
  agua_gasta_semana:
    source: sensor.vazao_de_agua
    cycle: weekly
  agua_gasta_mes:
    source: sensor.vazao_de_agua
    cycle: monthly
  agua_gasta_ano:
    source: sensor.vazao_de_agua
    cycle: yearly


# Binary Sensor
#  ____  _                           _____
# |  _ \(_)                         / ____
# | |_) |_ _ __   __ _ _ __ _   _  | (___   ___ _ __  ___  ___  _ __
# |  _ <| | '_ \ / _` | '__| | | |  \___ \ / _ \ '_ \/ __|/ _ \| '__|
# | |_) | | | | | (_| | |  | |_| |  ____) |  __/ | | \__ \ (_) | |
# |____/|_|_| |_|\__,_|_|   \__, | |_____/ \___|_| |_|___/\___/|_|
#                           |___/
# https://www.home-assistant.io/components/binary_sensor/
# https://www.home-assistant.io/components/binary_sensor.mqtt/
# https://www.home-assistant.io/components/ping/
# https://community.home-assistant.io/t/sonoff-rf-bridge-strategies-for-receiving-data/108181
binary_sensor:
# DIA DE TRABALHO
#  - platform: workday
#    country: BR
#    name: Trabalhando
  # CONTROLE DIGOO 1
  - platform: mqtt
    name: C1 Armar
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '2970D1' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.c1_armar') | upper}}
      {% endif %}
    off_delay: 2
    device_class: power
  - platform: mqtt
    name: C1 Desarmar
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '2970D2' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.c1_desarmar') | upper}}
      {% endif %}
    off_delay: 2
    device_class: power
  - platform: mqtt
    name: C1 Home
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '2970D4' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.c1_home') | upper}}
      {% endif %}
    off_delay: 2
    device_class: occupancy
  - platform: mqtt
    name: C1 SOS
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '2970D8' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.c1_sos') | upper}}
      {% endif %}
    off_delay: 2
    device_class: vibration
  # CONTROLE DIGOO 2
  - platform: mqtt
    name: C2 Armar
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '921051' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.c2_armar') | upper}}
      {% endif %}
    off_delay: 2
    device_class: power
  - platform: mqtt
    name: C2 Desarmar
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '921052' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.c2_desarmar') | upper}}
      {% endif %}
    off_delay: 2
    device_class: power
  - platform: mqtt
    name: C2 Home
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '921054' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.c2_home') | upper}}
      {% endif %}
    off_delay: 2
    device_class: occupancy
  - platform: mqtt
    name: C2 SOS
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '921058' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.c2_sos') | upper}}
      {% endif %}
    off_delay: 2
    device_class: vibration
  # CONTROLE DIGOO 3
  - platform: mqtt
    name: C3 Armar
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '77B0D1' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.c3_armar') | upper}}
      {% endif %}
    off_delay: 2
    device_class: power
  - platform: mqtt
    name: C3 Desarmar
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '77B0D2' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.c3_desarmar') | upper}}
      {% endif %}
    off_delay: 2
    device_class: power
  - platform: mqtt
    name: C3 Home
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '77B0D4' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.c3_home') | upper}}
      {% endif %}
    off_delay: 2
    device_class: occupancy
  - platform: mqtt
    name: C3 SOS
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '77B0D8' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.c3_sos') | upper}}
      {% endif %}
    off_delay: 2
    device_class: vibration
  # SENSORES DIGOO ABRE FECHA
  - platform: mqtt
    name: Janela Quarto M
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '996D46' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.janela_quarto_m') | upper}}
      {% endif %}
    off_delay: 3
    device_class: window
  - platform: mqtt
    name: Janela Quarto F
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'CD5B46' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.janela_quarto_f') | upper}}
      {% endif %}
    off_delay: 3
    device_class: window
  - platform: mqtt
    name: Janela Suite
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'B92D46' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.janela_suite') | upper}}
      {% endif %}
    off_delay: 3
    device_class: window
  - platform: mqtt
    name: Janela Cozinha
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'C41B46' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.janela_cozinha') | upper}}
      {% endif %}
    off_delay: 3
    device_class: window
  - platform: mqtt
    name: Porta Varanda
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '5E6B46' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.porta_varanda') | upper}}
      {% endif %}
    off_delay: 3
    device_class: door
  - platform: mqtt
    name: Porta Entrada
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '2E9D46' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.porta_entrada') | upper}}
      {% endif %}
    off_delay: 3
    device_class: door
  - platform: mqtt
    name: Porta Area
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '09D8C6' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.porta_area') | upper}}
      {% endif %}
    off_delay: 3
    device_class: door
  - platform: mqtt
    name: Janela Closet
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '7F7D46' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.janela_closet') | upper}}
      {% endif %}
    off_delay: 3
    device_class: window
#  # SENSORES DIGOO PRESENCA
  - platform: mqtt
    name: Corredor
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '82C186' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.corredor') | upper}}
      {% endif %}
    off_delay: 3
    device_class: motion
  - platform: mqtt
    name: Sala Jantar
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '55A486' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.sala_jantar') | upper}}
      {% endif %}
    off_delay: 3
    device_class: motion
  - platform: mqtt
    name: Sala Social
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '9B5086' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.sala_social') | upper}}
      {% endif %}
    off_delay: 3
    device_class: motion
  - platform: mqtt
    name: Closet
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '175D26' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.closet') | upper}}
      {% endif %}
    off_delay: 5
    device_class: motion
  - platform: mqtt
    name: Ext Piscina
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '4AFE66' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.ext_piscina') | upper}}
      {% endif %}
    off_delay: 5
    device_class: motion
  - platform: mqtt
    name: Ext Garagem
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'AAC186' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.ext_garagem') | upper}}
      {% endif %}
    off_delay: 5
    device_class: motion
  # INTERRUPTORES 433MHZ
  - platform: mqtt
    name: RF1 Interruptor Coz
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '5E22A1' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1_interruptor_coz') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF2 Interruptor Coz
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '5E22A2' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf2_interruptor_coz') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF1e2 Interruptor Coz
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '5E22A3' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1e2_interruptor_coz') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving

  - platform: mqtt
    name: RF1 Interruptor BSu
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'DF88B1' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1_interruptor_bsu') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF2 Interruptor BSu
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'DF88B2' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf2_interruptor_bsu') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF1e2 Interruptor BSu
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'DF88B3' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1e2_interruptor_bsu') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving

  - platform: mqtt
    name: RF1 Interruptor BSo
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'FAC381' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1_interruptor_bso') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF2 Interruptor BSo
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'FAC382' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf2_interruptor_bso') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF1e2 Interruptor BSo
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'FAC383' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1e2_interruptor_bso') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  # Suite
  - platform: mqtt
    name: RF1 Interruptor Suite
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'BCF581' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1_interruptor_suite') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF2 Interruptor Suite
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'BCF588' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf2_interruptor_suite') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF3 Interruptor Suite
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'BCF582' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf3_interruptor_suite') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF1e2 Interruptor Suite
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'BCF589' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1e2_interruptor_suite') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF1e3 Interruptor Suite
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'BCF583' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1e3_interruptor_suite') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving   
  - platform: mqtt
    name: RF2e3 Interruptor Suite
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'BCF58A' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf2e3_interruptor_suite') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF123 Interruptor Suite
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'BCF58B' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf123_interruptor_suite') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving

  # Qaurto Frente
  - platform: mqtt
    name: RF1 Interruptor Quarto Frente
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '08F8A1' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1_interruptor_quarto_frente') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF2 Interruptor Quarto Frente
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '08F8A8' %} 
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf2_interruptor_quarto_frente') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF3 Interruptor Quarto Frente
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '08F8A2' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf3_interruptor_quarto_frente') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF1e2 Interruptor Quarto Frente
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '08F8A9' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1e2_interruptor_quarto_frente') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF1e3 Interruptor Quarto Frente
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '08F8A3' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1e3_interruptor_quarto_frente') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF2e3 Interruptor Quarto Frente
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '08F8AA' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf2e3_interruptor_quarto_frente') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF123 Interruptor Quarto Frente
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == '08F8AB' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf123_interruptor_quarto_frente') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving

  # Quarto Meio
  - platform: mqtt
    name: RF1 Interruptor Quarto Meio
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'A89981' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1_interruptor_quarto_meio') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF2 Interruptor Quarto Meio
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'A89988' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf2_interruptor_quarto_meio') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF3 Interruptor Quarto Meio
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'A89982' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf3_interruptor_quarto_meio') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF1e2 Interruptor Quarto Meio
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'A89989' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1e2_interruptor_quarto_meio') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF1e3 Interruptor Quarto Meio
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'A89983' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf1e3_interruptor_quarto_meio') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF2e3 Interruptor Quarto Meio
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'A8998A' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf2e3_interruptor_quarto_meio') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving
  - platform: mqtt
    name: RF123 Interruptor Quarto Meio
    state_topic: 'tele/sonoffBr1/RESULT'
    value_template: >-
      {% if value_json.RfReceived.Data == 'A8998B' %}
        {{'ON'}}
      {% else %}
        {{states('binary_sensor.rf123_interruptor_quarto_meio') | upper}}
      {% endif %}
    off_delay: 1
    device_class: moving    
  - platform: mqtt
    name: Porta Geladeira
    payload_on: "57810A"
    payload_off: "57810E"
    device_class: door
    state_topic: "tele/sonoffBr1/RESULT"
    value_template: '{{ value_json.RfReceived.Data }}'
  - platform: mqtt
    name: Porta Garagem
    payload_on: "59840A"
    payload_off: "59840E"
    device_class: door
    state_topic: "tele/sonoffBr1/RESULT"
    value_template: '{{ value_json.RfReceived.Data }}'
  - platform: mqtt
    name: Porta Lavanderia
    payload_on: "54A00A"
    payload_off: "54A00E"
    device_class: door
    state_topic: "tele/sonoffBr1/RESULT"
    value_template: '{{ value_json.RfReceived.Data }}'

  - platform: mqtt
    name: "Porta Teste JSON"
    payload_on: "58960A"
    payload_off: "58960E"
    device_class: door
    state_topic: "tele/sonoffBr1/RESULT"
    value_template: '{{ value_json.RfReceived.Data }}'
#  - platform: mqtt
#    name: "Porta Teste RF 1"
#    state_topic: "PortaTeste/STATE"
#    availability_topic: "tele/sonoffBr1/LWT"
#    qos: 1  
#    payload_on: "Open"
#    payload_off: "Closed"
#    payload_available: "Online"
#    payload_not_available: "Offline"
#    device_class: door

#  - platform: mqtt
#    name: "Porta Teste RF 2"
#    state_topic: "PortaTeste/STATE"
#    availability_topic: "tele/sonoffBr1/LWT"
#    qos: 1  
#    payload_on: "Open"
#    payload_off: "Closed"
#    payload_available: "ON"
#    payload_not_available: "OFF"
#    device_class: door


# ? Sonoff Bridge
# ? SensorRetain On ?
# ? SwitchRetain On ?

  # PINGs
  - platform: ping
    name: Internet  
    host: 192.168.10.1
  - platform: ping
    name: Google WiFi
    host: 192.168.87.1
#  - platform: ping
#    name: PC Desktop
#    host: 192.168.87.2
  - platform: ping
    name: Sonoff RF Bridge
    host: 192.168.87.6
  - platform: ping
    name: Broadlink IR Sala
    host: 192.168.87.7
  - platform: ping
    name: Broadlink IR Quarto
    host: 192.168.87.8
  - platform: ping
    name: Google Home Sala
    host: 192.168.87.9
  - platform: ping
    name: Google Home Quarto
    host: 192.168.87.10
  - platform: ping
    name: Chrome Cast Quarto
    host: 192.168.87.11
  - platform: ping
    name: Chrome Cast Game
    host: 192.168.87.12
#  - platform: ping
#    name: Tv LG Game
#    host: 192.168.87.13
  - platform: ping
    name: Camera Digoo
    host: 192.168.87.14
  - platform: ping
    name: WCam360
    host: 192.168.87.15
  - platform: ping
    name: Xiaofang
    host: 192.168.87.16
  - platform: ping
    name: V380 Piscina
    host: 192.168.87.17
  - platform: ping
    name: V380 Interna
    host: 192.168.87.18
#  - platform: ping
#    name: Fita Led Cabeceira 
#    host: 192.168.87.19
#  - platform: ping
#    name: Yeelink-Ligth
#    host: 192.168.87.20
#    count: 5
#    scan_interval: 240

# Luzes
#  _      _       _     _
# | |    (_)     | |   | |
# | |     _  __ _| |__ | |_
# | |    | |/ _` | '_ \| __|
# | |____| | (_| | | | | |_
# |______|_|\__, |_| |_|\__|
#           |___/
# https://www.home-assistant.io/components/light/
# https://www.home-assistant.io/components/light.group/
# https://www.home-assistant.io/components/flux_led/
# https://www.home-assistant.io/components/light.mqtt/
# https://www.home-assistant.io/integrations/yeelight/
yeelight:
  devices:
    192.168.87.20:
      name: Luz do Abajur
light:
  - platform: flux_led
    devices:
      192.168.87.19:
        name: "Luz da Cabeceira"
  - platform: mqtt
    name: "Luz da Garagem"
    state_topic: "stat/sonoff13/POWER"
    command_topic: "cmnd/sonoff13/POWER"
    availability_topic: "tele/sonoff13/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz da Pia"
    state_topic: "stat/sonoff15/POWER"
    command_topic: "cmnd/sonoff15/POWER"
    availability_topic: "tele/sonoff15/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz do Bebedor"
    state_topic: "stat/sonoff21/POWER"
    command_topic: "cmnd/sonoff21/POWER"
    availability_topic: "tele/sonoff21/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz da Entrada"
    state_topic: "stat/sonoff28/POWER"
    command_topic: "cmnd/sonoff28/POWER"
    availability_topic: "tele/sonoff28/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz JF"
    state_topic: "stat/sonoff11/POWER"
    command_topic: "cmnd/sonoff11/POWER"
    availability_topic: "tele/sonoff11/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz JG"
    state_topic: "stat/sonoff20/POWER"
    command_topic: "cmnd/sonoff20/POWER"
    availability_topic: "tele/sonoff20/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz Sala Game"
    state_topic: "stat/sonoff14/POWER"
    command_topic: "cmnd/sonoff14/POWER"
    availability_topic: "tele/sonoff14/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz Central"
    state_topic: "stat/sonoff07/POWER"
    command_topic: "cmnd/sonoff07/POWER"
    availability_topic: "tele/sonoff07/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz Trilhos"
    state_topic: "stat/sonoff19/POWER"
    command_topic: "cmnd/sonoff19/POWER"
    availability_topic: "tele/sonoff19/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz da Mesa de Jantar"
    state_topic: "stat/sonoff29/POWER"
    command_topic: "cmnd/sonoff29/POWER"
    availability_topic: "tele/sonoff29/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz dos Postes"
    state_topic: "stat/sonoff23/POWER"
    command_topic: "cmnd/sonoff23/POWER"
    availability_topic: "tele/sonoff23/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz Pendentes"
    state_topic: "stat/sonoff16/POWER"
    command_topic: "cmnd/sonoff16/POWER"
    availability_topic: "tele/sonoff16/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz da Cozinha"
    state_topic: "stat/sonoff05/POWER"
    command_topic: "cmnd/sonoff05/POWER"
    availability_topic: "tele/sonoff05/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz da Lavanderia"
    state_topic: "stat/sonoff22/POWER"
    command_topic: "cmnd/sonoff22/POWER"
    availability_topic: "tele/sonoff22/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz do Lavabo"
    state_topic: "stat/sonoff01/POWER"
    command_topic: "cmnd/sonoff01/POWER"
    availability_topic: "tele/sonoff01/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz do Lustre"
    state_topic: "stat/sonoff12/POWER"
    command_topic: "cmnd/sonoff12/POWER"
    availability_topic: "tele/sonoff12/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz da Sala de Estar"
    state_topic: "stat/sonoff31/POWER"
    command_topic: "cmnd/sonoff31/POWER"
    availability_topic: "tele/sonoff31/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz do Corredor"
    state_topic: "stat/sonoff08/POWER"
    command_topic: "cmnd/sonoff08/POWER"
    availability_topic: "tele/sonoff08/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz do Quarto da Frente"
    state_topic: "stat/sonoff04/POWER"
    command_topic: "cmnd/sonoff04/POWER"
    availability_topic: "tele/sonoff04/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz do Quarto do Meio"
    state_topic: "stat/sonoff06/POWER"
    command_topic: "cmnd/sonoff06/POWER"
    availability_topic: "tele/sonoff06/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz do Banheiro Social"
    state_topic: "stat/sonoff24/POWER"
    command_topic: "cmnd/sonoff24/POWER"
    availability_topic: "tele/sonoff24/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz da Suite"
    state_topic: "stat/sonoff26/POWER"
    command_topic: "cmnd/sonoff26/POWER"
    availability_topic: "tele/sonoff26/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz do Banheiro da Suite"
    command_topic: "cmnd/sonoff09/POWER"
    state_topic: "stat/sonoff09/POWER"
    availability_topic: "tele/sonoff09/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz do Closet"
    state_topic: "stat/sonoff30/POWER"
    command_topic: "cmnd/sonoff30/POWER"
    availability_topic: "tele/sonoff30/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz da Area da Piscina"
    state_topic: "stat/sonoff10/POWER"
    command_topic: "cmnd/sonoff10/POWER"
    availability_topic: "tele/sonoff10/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz Varanda Fundos"
    state_topic: "stat/sonoff03/POWER"
    command_topic: "cmnd/sonoff03/POWER"
    availability_topic: "tele/sonoff03/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz Arandelas da Varanda"
    state_topic: "stat/sonoff17/POWER"
    command_topic: "cmnd/sonoff17/POWER"
    availability_topic: "tele/sonoff17/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Luz Arandelas Principais"
    state_topic: "stat/sonoff25/POWER"
    command_topic: "cmnd/sonoff25/POWER"
    availability_topic: "tele/sonoff25/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true

# Comandos console tasmota desativar retenção mqtt
# https://github.com/arendst/Sonoff-Tasmota/wiki/Commands
#Tasmota Console Command: SwitchRetain Off
#Tasmota Console Command: ButtonRetain On
#Tasmota Console Command: ButtonRetain Off
#Tasmota Console Command: PowerRetain On


# Interruptores
#   _____         _ _       _
#  / ____|       (_) |     | |
# | (_____      ___| |_ ___| |__
#  \___ \ \ /\ / / | __/ __| '_ \
#  ____) \ V  V /| | || (__| | | |
# |_____/ \_/\_/ |_|\__\___|_| |_|
# https://www.home-assistant.io/components/switch/
# https://www.home-assistant.io/components/switch.template/
# https://www.home-assistant.io/components/switch.mqtt/
# https://www.home-assistant.io/components/broadlink/
switch:
  - platform: template
    switches:
      seguranca_casa:
        value_template: '{{ states("input_boolean.seguranca_casa") }}'
        friendly_name: 'Segurança da Casa'
        turn_on:
          - service: input_boolean.turn_on
            entity_id: input_boolean.seguranca_casa
          - service: alarm_control_panel.alarm_arm_away
            data:
              entity_id: alarm_control_panel.alarme_da_casa
              code: !secret senha_alarme
        turn_off:
          - service: input_boolean.turn_off
            entity_id: input_boolean.seguranca_casa
          - service: alarm_control_panel.alarm_disarm
            data:
              entity_id: alarm_control_panel.alarme_da_casa
              code: !secret senha_alarme

  - platform: broadlink
    host: 192.168.87.7
    mac: '78:0F:77:18:39:F8'
    type: rm_mini
    timeout: 300
    switches:
      xboom_som:
        friendly_name: "Sonzeira"
        command_on: 'JgBeAJOUEhMSExMSExIROBITERQRFBETEhMRFBEUETgSExEUERQRExI4EjcSOBI4ERMSExITETkRExITEhMRFBE4EjgSNxIABpWUlRI4EgAMVZKVEjgSAAxVk5UROBIADQUAAAAAAAAAAAAA'
        command_off: 'JgBeAJOUEhMSExMSExIROBITERQRFBETEhMRFBEUETgSExEUERQRExI4EjcSOBI4ERMSExITETkRExITEhMRFBE4EjgSNxIABpWUlRI4EgAMVZKVEjgSAAxVk5UROBIADQUAAAAAAAAAAAAA'
      tv_lg_55:
        friendly_name: "Tv da Sala"
        command_on: 'JgBQAAABKZQQFRETEjgRFBEUERQRFBEUETgROREUETkRORA6EDkROREUERQRFBE5EBURExITEhMSOBE5EDoQFRE4ETkRORE5EAAFLAABKUoRAA0FAAAAAAAAAAA='
        command_off: 'JgBQAAABKZQQFRETEjgRFBEUERQRFBEUETgROREUETkRORA6EDkROREUERQRFBE5EBURExITEhMSOBE5EDoQFRE4ETkRORE5EAAFLAABKUoRAA0FAAAAAAAAAAA='
      projetor:
        friendly_name: Projetor
        command_on: 'JgBgAAABI5MSExA5ERMRFBETERQQFRETETcTEhI4ETgQORI4ETgQORE4ERMRORE4EDkRFBAUEhISExA5EhMQFRETETgSNxE4EgAFEwABJkkTAAw6AAElRhUADDgAASVIEwANBQAAAAAAAAAA'
        command_off: 'JgBgAAABI5MSExA5ERMRFBETERQQFRETETcTEhI4ETgQORI4ETgQORE4ERMRORE4EDkRFBAUEhISExA5EhMQFRETETgSNxE4EgAFEwABJkkTAAw6AAElRhUADDgAASVIEwANBQAAAAAAAAAA'
      htv:
        friendly_name: "Android TV"
        command_on: 'JgBYAAABJ5ITExITEhMTExITEhMTExI4EjgSOBI4EjgSOBM3EjgTOBITEjgSExM3ExMRFBITExMSOBITEjgSFBI4EjgSOBI4EQAE/gABJksSAAxgAAEmTBEADQU='
        command_off: 'JgBYAAABJ5ITExITEhMTExITEhMTExI4EjgSOBI4EjgSOBM3EjgTOBITEjgSExM3ExMRFBITExMSOBITEjgSFBI4EjgSOBI4EQAE/gABJksSAAxgAAEmTBEADQU='

  - platform: broadlink
    host: 192.168.87.8
    mac: '34:EA:34:8E:EC:47'
    type: rm_mini
    timeout: 300
    switches:
      tv_quarto:
        friendly_name: "TV do Quarto"
        command_on: 'JgBIAAABJpETEhMSEhITEhISExETNhQREzYUNhM2FDUUNhM2ExITNhMSEjcTEhISEzUUERQRExEUNRQRFDUUNhMRFDYTNhQ1FAANBQ=='
        command_off: 'JgBIAAABJpETEhMSEhITEhISExETNhQREzYUNhM2FDUUNhM2ExITNhMSEjcTEhISEzUUERQRExEUNRQRFDUUNhMRFDYTNhQ1FAANBQ=='
      umidificador:
        friendly_name: "Umidificador"
        command_on: 'JgBYAAABKpUTExQRExMTEhQRFBIUERQRFDYUNhI4EjgSNxM3EzcSOBITFREVEBUQFREVEBURFBEVNRI4ETgTNxM3EjgSOBI3EwAFIwABLUgVAAxbAAErShMADQU='
        command_off: 'JgBYAAABKpUTExQRExMTEhQRFBIUERQRFDYUNhI4EjgSNxM3EzcSOBITFREVEBUQFREVEBURFBEVNRI4ETgTNxM3EjgSOBI3EwAFIwABLUgVAAxbAAErShMADQU='

  - platform: broadlink
    host: 192.168.87.251
    mac: '24:DF:A7:7A:75:D3'
    type: rm_mini3_redbean
    friendly_name: Broadlink3
    timeout: 300
#    switches:
#      tv_onoff_estar:
#        friendly_name: "TV Estar OnOff"
#        command_on: 'JgBYAAABKpUTExQRExMTEhQRFBIUERQRFDYUNhI4EjgSNxM3EzcSOBITFREVEBUQFREVEBURFBEVNRI4ETgTNxM3EjgSOBI3EwAFIwABLUgVAAxbAAErShMADQU='
#        command_off: 'JgBYAAABKpUTExQRExMTEhQRFBIUERQRFDYUNhI4EjgSNxM3EzcSOBITFREVEBUQFREVEBURFBEVNRI4ETgTNxM3EjgSOBI3EwAFIwABLUgVAAxbAAErShMADQU='

  - platform: mqtt
    name: "Sirenes"
    state_topic: "stat/sonoff27/POWER"
    command_topic: "cmnd/sonoff27/power"
    availability_topic: "tele/sonoff27/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
    retain: true
  - platform: mqtt
    name: "Ventilador"
    state_topic: "stat/sonoff32/POWER"
    command_topic: "cmnd/sonoff32/power"
    availability_topic: "tele/sonoff32/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
    retain: true
  - platform: mqtt
    name: "Aquecedor"
    state_topic: "stat/aquecedor/POWER"
    command_topic: "cmnd/aquecedor/power"
    availability_topic: "tele/aquecedor/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
    retain: true
  - platform: mqtt
    name: "Pressurizador"
    state_topic: "stat/sonoff18/POWER"
    command_topic: "cmnd/sonoff18/power"
    availability_topic: "tele/sonoff18/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
    retain: true
  - platform: mqtt
    name: "Máquina de Lavar"
    state_topic: "stat/sonoffpow/POWER"
    command_topic: "cmnd/sonoffpow/power"
    availability_topic: "tele/sonoffpow/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
    retain: true
  - platform: mqtt
    name: "Motor da Piscina"
    state_topic: "stat/powpiscina/POWER"
    command_topic: "cmnd/powpiscina/power"
    availability_topic: "tele/powpiscina/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
  - platform: mqtt
    name: "Geladeira"
    state_topic: "stat/powgeladeira/POWER"
    command_topic: "cmnd/powgeladeira/power"
    availability_topic: "tele/powgeladeira/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
  - platform: mqtt
    name: "Purificador"
    state_topic: "stat/powpurificador/POWER"
    command_topic: "cmnd/powpurificador/power"
    availability_topic: "tele/powpurificador/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
  - platform: mqtt
    name: "Cervejeira"
    state_topic: "stat/powcerveja/POWER"
    command_topic: "cmnd/powcerveja/power"
    availability_topic: "tele/powcerveja/LWT"
    payload_available: "Conectado"
    payload_not_available: "Desconectado"
#    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
#    retain: true
#    retain: true
#  - platform: mqtt
#    name: "Sonoff Pro CH1"
#    state_topic: "stat/sonoffPro/POWER1"
#    command_topic: "cmnd/sonoffPro/POWER1"
#    availability_topic: "tele/sonoffPro/LWT"
#    payload_available: "Conectado"
#    payload_not_available: "Desconectado"
##    qos: 1
#    payload_on: "ON"
#    payload_off: "OFF"
#    retain: true
#  - platform: mqtt
#    name: "Sonoff Pro CH2"
#    state_topic: "stat/sonoffPro/POWER2"
#    command_topic: "cmnd/sonoffPro/POWER2"
#    availability_topic: "tele/sonoffPro/LWT"
#    payload_available: "Conectado"
#    payload_not_available: "Desconectado"
##    qos: 1
#    payload_on: "ON"
#    payload_off: "OFF"
#    retain: true
#  - platform: mqtt
#    name: "Sonoff Pro CH3"
#    state_topic: "stat/sonoffPro/POWER3"
#    command_topic: "cmnd/sonoffPro/POWER3"
#    availability_topic: "tele/sonoffPro/LWT"
#    payload_available: "Conectado"
#    payload_not_available: "Desconectado"
##    qos: 1
#    payload_on: "ON"
#    payload_off: "OFF"
#    retain: true
#  - platform: mqtt
#    name: "Sonoff Pro CH4"
#    state_topic: "stat/sonoffPro/POWER4"
#    command_topic: "cmnd/sonoffPro/POWER4"
#    availability_topic: "tele/sonoffPro/LWT"
#    payload_available: "Conectado"
#    payload_not_available: "Desconectado"
##    qos: 1
#    payload_on: "ON"
#    payload_off: "OFF"
#    retain: true
  - platform: command_line
    switches:
      camwascam_dir:
        friendly_name: 'Direita'
        command_on:  !secret wascam_curl_direita
        command_off: !secret wascam_curl_parar
      camwascam_esq:
        friendly_name: 'Esquerda'
        command_on:  !secret wascam_curl_esquerda
        command_off: !secret wascam_curl_parar
      camwascam_up:
        friendly_name: 'Cima'
        command_on:  !secret wascam_curl_cima
        command_off: !secret wascam_curl_parar
      camwascam_down:
        friendly_name: 'Baixo'
        command_on:  !secret wascam_curl_baixo
        command_off: !secret wascam_curl_parar
      camwascam_centralizar:
        friendly_name: 'Centralizar'
        command_on:  !secret wascam_curl_centralizar
        command_off: !secret wascam_curl_parar

# Inputs de texto
#  _____                   _    _            _
# |_   _|                 | |  | |          | |
#   | |  _ __  _ __  _   _| |_ | |_ _____  _| |_
#   | | | '_ \| '_ \| | | | __|| __/ _ \ \/ / __|
#  _| |_| | | | |_) | |_| | |_ | ||  __/>  <| |_
# |_____|_| |_| .__/ \__,_|\__| \__\___/_/\_\\__|
#             | |           ______
#             |_|          |______|
# https://www.home-assistant.io/components/input_text/
input_text:
  despert1_mensagem:
    name: Mensagem
    initial: "Bom dia!"
    icon: mdi:voice
  despert2_mensagem:
    name: Mensagem
    initial: "Já está na hora de ir trabalhar!"
    icon: mdi:voice
  url_media_extractor:
    name: URL
    initial: "https://www.youtube.com/watch?v=8NGcbkRJLfk&t=935s"
    icon: mdi:link-variant
  text_valor_kwh:
    name: "Valor kW/h"
    initial: "0.800"
  text_valor_agua:
    name: "Valor por litro"
    initial: "0.007"

# Inputs de data/hora
#  _____                   _        _       _       _   _
# |_   _|                 | |      | |     | |     | | (_)
#   | |  _ __  _ __  _   _| |_   __| | __ _| |_ ___| |_ _ _ __ ___   ___
#   | | | '_ \| '_ \| | | | __| / _` |/ _` | __/ _ \ __| | '_ ` _ \ / _ \
#  _| |_| | | | |_) | |_| | |_ | (_| | (_| | ||  __/ |_| | | | | | |  __/
# |_____|_| |_| .__/ \__,_|\__| \__,_|\__,_|\__\___|\__|_|_| |_| |_|\___|
#             | |           ______
#             |_|          |______|
# https://www.home-assistant.io/components/input_datetime/
input_datetime:
  poste_off:
    name: "Desligar poste às"
    has_date: false
    has_time: true
    initial: "23:30"
  arandelas_off:
    name: "Desligar arandelas às"
    has_date: false
    has_time: true
    initial: "23:30"
#  silvio_on:
#    name: "Silvio acorda"
#    has_date: false
#    has_time: true
#    initial: "03:25"
#  silvio_off:
#    name: "Silvio já saiu"
#    has_date: false
#    has_time: true
#    initial: "04:00"

# Inputs numéricos
#  _____                   _                           _
# |_   _|                 | |                         | |
#   | |  _ __  _ __  _   _| |_   _ __  _   _ _ __ ___ | |__   ___ _ __
#   | | | '_ \| '_ \| | | | __| | '_ \| | | | '_ ` _ \| '_ \ / _ \ '__|
#  _| |_| | | | |_) | |_| | |_  | | | | |_| | | | | | | |_) |  __/ |
# |_____|_| |_| .__/ \__,_|\__| |_| |_|\__,_|_| |_| |_|_.__/ \___|_|
#             | |           ______
#             |_|          |______|
# https://www.home-assistant.io/components/input_number/
input_number:
  anoitecer:
    name: Anoitecer após Minutos
    icon: mdi:timer
    initial: 10
    min: 0
    max: 90
    step: 5
    mode: slider
  despert1_hora:
    name: Hora
    icon: mdi:timer
    initial: 7
    min: 0
    max: 23
    step: 1
    mode: slider
  despert1_minuto:
    name: Minuto
    icon: mdi:timer
    initial: 00
    min: 0
    max: 59
    step: 1
    mode: slider
  despert1_volume:
    name: Volume
    icon: mdi:volume-high
    initial: 0.60
    min: 0
    max: 0.99
    step: 0.10
    mode: slider
  despert2_hora:
    name: Hora
    icon: mdi:timer
    initial: 13
    min: 0
    max: 23
    step: 1
    mode: slider
  despert2_minuto:
    name: Minuto
    icon: mdi:timer
    initial: 15
    min: 0
    max: 59
    step: 1
    mode: slider
  despert2_volume:
    name: Volume
    icon: mdi:volume-high
    initial: 0.70
    min: 0
    max: 0.99
    step: 0.10
    mode: slider
  tempo_banheiro_social:
    name: "Tempo máx. luz banheiro social"
    icon: mdi:timer
    initial: 30
    min: 0
    max: 60
    step: 1
    mode: slider
  tempo_banheiro_suite:
    name: "Tempo máx. luz banheiro suíte"
    icon: mdi:timer
    initial: 30
    min: 0
    max: 60
    step: 1
    mode: slider
  tempo_banheiro_lavabo:
    name: "Tempo máx. luz lavabo"
    icon: mdi:timer
    initial: 10
    min: 0
    max: 30
    step: 1
    mode: slider
  tempo_corredor:
    name: "Tempo máx. luz corredor"
    icon: mdi:timer
    initial: 2
    min: 0
    max: 30
    step: 1
    mode: slider
  tempo_closet:
    name: "Tempo máx. luz closet"
    icon: mdi:timer
    initial: 2
    min: 0
    max: 30
    step: 1
    mode: slider
  audio_volume:
    name: Volume
    icon: mdi:volume-high
    initial: 0.40
    min: 0
    max: 1
    step: 0.01
    mode: slider
  video_volume:
    name: Volume
    icon: mdi:volume-high
    initial: 1
    min: 0
    max: 1
    step: 0.01
    mode: slider
  volume_media_extractor:
    name: Volume
    icon: mdi:volume-high
    initial: 1
    min: 0
    max: 1
    step: 0.01
    mode: slider
    
#  #fake sensor
#  nivel:
#    name: 'Ultrassônico HC-SR04'
#    icon: 'mdi:leak'
#    initial: 11
#    min: 0
#    max: 98
#    step: 1
#    mode: slider
#    # Caixa tem 87 cm, da tampa até chegar na agua tem + 11 cm

  internet_delta_in:
    initial: 0
    min: 0
    max: 1000000000000
    mode: slider
  internet_delta_out:
    initial: 0
    min: 0
    max: 1000000000000
    mode: slider

# Inputs boolean (on/off)
#  _____                   _     _                 _
# |_   _|                 | |   | |               | |
#   | |  _ __  _ __  _   _| |_  | |__   ___   ___ | | ___  __ _ _ __
#   | | | '_ \| '_ \| | | | __| | '_ \ / _ \ / _ \| |/ _ \/ _` | '_ \
#  _| |_| | | | |_) | |_| | |_  | |_) | (_) | (_) | |  __/ (_| | | | |
# |_____|_| |_| .__/ \__,_|\__| |_.__/ \___/ \___/|_|\___|\__,_|_| |_|
#             |_|
# https://www.home-assistant.io/components/input_boolean/
input_boolean:
  despert1_status:
    name: Status
    initial: on
  despert2_status:
    name: Status
    initial: on
  seguranca_casa:
    name: "Segurança"
    icon: mdi:shield-home
  modo_visitante:
    name: Modo Visitante
    initial: off
    icon: mdi:account-key-outline
#  boolean_fake:
#    name: Boolean Fake
#    initial: off
  despert1_tempo:
    name: Ouvir informações de tempo
    initial: on
  despert2_tempo:
    name: Ouvir informações de tempo
    initial: on    

# Inputs selects
#  _____                   _              _           _
# |_   _|                 | |            | |         | |
#   | |  _ __  _ __  _   _| |_   ___  ___| | ___  ___| |_
#   | | | '_ \| '_ \| | | | __| / __|/ _ \ |/ _ \/ __| __|
#  _| |_| | | | |_) | |_| | |_  \__ \  __/ |  __/ (__| |_
# |_____|_| |_| .__/ \__,_|\__| |___/\___|_|\___|\___|\__|
#             |_|
# https://www.home-assistant.io/components/input_select/
input_select:
  despert1_src:
    name: 'Reproduzir em Googlo Home'
    options:
      - Todos
      - do Quarto
      - da Sala
    icon: mdi:google-home
  despert1_audio_str:
    name: 'Ouvir Rádio Despertador'
    options:
      - Não
      - Classic Rock Florida
      - Mix FM
      - Kiss FM Brasil
      - Blues
      - Diney
      - Coca-Cola
      - Transamerica
      - BBC
      - DubBase FM
    icon: mdi:music-note
  despert1_tts:
    name: 'Qual Voz'
    options:
      - Google
#      - Voicerss
#      - Watson
#      - Amazon
    icon: mdi:voice
  despert2_src:
    name: 'Reproduzir em Googlo Home'
    options:
      - Todos
      - da Sala
      - do Quarto
    icon: mdi:google-home
  despert2_audio_str:
    name: 'Ouvir Rádio Despertador'
    options:
      - Não
      - Classic Rock Florida
      - Mix FM
      - Kiss FM Brasil
      - Blues
      - Diney
      - Coca-Cola
      - Transamerica
      - BBC
      - DubBase FM
    icon: mdi:music-note
  despert2_tts:
    name: 'Qual Voz'
    options:
      - Google
#      - Voicerss
#      - Watson
#      - Amazon
    icon: mdi:voice
  src_cast_audio:
    name: 'Ouvir em'
    options:
      - Google Home Quarto
      - Google Home Sala
      - Todos Google Homes
      - Chromecast Tv Sala
      - Chromecast Tv Quarto
    icon: mdi:google-home
  str_audio:
    name: 'Reproduzir'
    options:
      - Historinhas
      - Sertanejo Boemia
      - Classic Rock Florida
      - Mix FM
      - Kiss FM Brasil
      - Blues
      - Diney
      - Coca-Cola
      - Transamerica
      - BBC
      - DubBase FM
    icon: mdi:music-note
  src_cast_video:
    name: 'Chrome Cast'
    options:
      - Quarto
      - Sala
    icon: mdi:google-chrome
  str_video:
    name: 'Reproduzir'
    options:
      - SBT
      - RDC TV POA
      - TV GAZETA
      - TV CIDADE OESTE
      - REDE TV SP
      - FUTURA
      - CAT TVE
      - TV ITAPETININGA SP
      - TV NOVA PARAIBA
      - TV Faap
      - CONECTV Osasco SP
      - TV MAR Maceio
    icon: mdi:library-video
  src_cast_media_extractor:
    name: 'Google Home'
    options:
      - Quarto
      - Sala
    icon: mdi:google-home
  padrao_tts:
    name: 'TTS Padrão'
    options:
      - Google
#      - Voicerss
#      - Watson
#      - Amazon
    icon: mdi:voice


# Permite que outros componentes do Home Assistant processem fluxos de vídeo e áudio.
#   __  __
#  / _|/ _|
# | |_| |_ _ __ ___  _ __   ___  __ _
# |  _|  _| '_ ` _ \| '_ \ / _ \/ _` |
# | | | | | | | | | | |_) |  __/ (_| |
# |_| |_| |_| |_| |_| .__/ \___|\__, |
#                   |_|         |___/
# https://www.home-assistant.io/components/ffmpeg/
ffmpeg:

# Cameras
#   _____
#  / ____|
# | |     __ _ _ __ ___   ___ _ __ __ _
# | |    / _` | '_ ` _ \ / _ \ '__/ _` |
# | |___| (_| | | | | | |  __/ | | (_| |
#  \_____\__,_|_| |_| |_|\___|_|  \__,_|
# https://www.home-assistant.io/components/camera/
# https://www.home-assistant.io/components/generic/
# https://www.home-assistant.io/components/onvif/
camera:
  - platform: generic
    name: Xiaofang
    username: root
    password: !secret mqtt_password
    authentication: basic
    still_image_url: !secret input_camera_xiaofang
    verify_ssl: false
  - platform: generic
    name: "Xiaofang Streaming"
    username: root
    password: !secret mqtt_password
    authentication: basic
    still_image_url: !secret input_camera_xiaofang
    stream_source: !secret input_camera_xiaofang_rtsp
    verify_ssl: false
  - platform: generic
    name: "Wanscam 360"
    still_image_url: !secret input_camera_garagem
  - platform: generic
    name: "Wanscam Streaming"
    still_image_url: !secret input_camera_garagem
    stream_source: !secret input_camera_garagem_rtsp
  - platform: ffmpeg
    name: Camera Interna
    input: !secret input_camera_interna
  - platform: ffmpeg
    name: V380rtsp1
    input: rtsp://192.168.87.17/live/ch00_1
  - platform: ffmpeg
    name: V380rtsp2
    input: rtsp://192.168.87.18/live/ch00_1

# Integração Google Assistant
#   _____                   _                         _     _              _
#  / ____|                 | |          /\           (_)   | |            | |
# | |  __  ___   ___   __ _| | ___     /  \   ___ ___ _ ___| |_ __ _ _ __ | |_
# | | |_ |/ _ \ / _ \ / _` | |/ _ \   / /\ \ / __/ __| / __| __/ _` | '_ \| __|
# | |__| | (_) | (_) | (_| | |  __/  / ____ \\__ \__ \ \__ \ || (_| | | | | |_
#  \_____|\___/ \___/ \__, |_|\___| /_/    \_\___/___/_|___/\__\__,_|_| |_|\__|
#                      __/ |
#                     |___/
# https://www.home-assistant.io/components/google_assistant/
google_assistant:
  project_id: !secret google_project
  service_account: !include google_service_account.json
  report_state: true
  exposed_domains:
    - switch
    - light
    - script
    - climate
    - media_player
    - scene
    - fan
#   - group


#   _____                   _         _____      _                _
#  / ____|                 | |       / ____|    | |              | | 
# | |  __  ___   ___   __ _| | ___  | |     __ _| | ___ _ __   __| | __ _ _ __
# | | |_ |/ _ \ / _ \ / _` | |/ _ \ | |    / _` | |/ _ \ '_ \ / _` |/ _` | '__|
# | |__| | (_) | (_) | (_| | |  __/ | |___| (_| | |  __/ | | | (_| | (_| | |
#  \_____|\___/ \___/ \__, |_|\___|  \_____\__,_|_|\___|_| |_|\__,_|\__,_|_|
#                     |___/
# https://www.home-assistant.io/components/calendar.google/
#google:
#  client_id: !secret google_client_id
#  client_secret: !secret google_client_secret

#           _                
#     /\   | |               
#    /  \  | | _____  ____ _ 
#   / /\ \ | |/ _ \ \/ / _` |
#  / ____ \| |  __/>  < (_| |
# /_/    \_\_|\___/_/\_\__,_|
# https://www.home-assistant.io/integrations/alexa/
# https://www.home-assistant.io/integrations/alexa.smart_home/

alexa:
  smart_home:
    endpoint: https://api.amazonalexa.com/v3/events
    client_id: !secret alexa_client_id
    client_secret: !secret alexa_client_secret
    filter:
      exclude_entities:
        - switch.camwascam_centralizar
        - switch.camwascam_up
        - switch.camwascam_down
        - switch.camwascam_dir
        - switch.camwascam_esq
      exclude_domains:
        - script
        - automation
        - input_text
        - input_number
        - input_datetime
        - input_select
        - sensor
        - binary_sensor
    entity_config:
      light.yeelight_color1_7c49eb15924b:
        name: "Luz do Abajur"
      group.all_lights:
        name: Todas as Luzes
        display_categories: LIGHT
      alarm_control_panel.alarme_da_casa:
        name: Segurança
      climate.climatizador:
        name: Ar do Quarto
        display_categories: THERMOSTAT
      climate.ar_da_sala:
        name: Ar da Sala
        display_categories: THERMOSTAT
      climate.ar_da_cozinha:
        name: Ar da Cozinha
        display_categories: THERMOSTAT

# https://github.com/custom-components/alexa_media_player
alexa_media:
  accounts:
    - email: !secret amazon_user
      password: !secret amazon_password
      url: amazon.com

# Telegram BOT
#  _______   _                                  _           _
# |__   __| | |                                | |         | |
#    | | ___| | ___  __ _ _ __ __ _ _ __ ___   | |__   ___ | |_
#    | |/ _ \ |/ _ \/ _` | '__/ _` | '_ ` _ \  | '_ \ / _ \| __|
#    | |  __/ |  __/ (_| | | | (_| | | | | | | | |_) | (_) | |_
#    |_|\___|_|\___|\__, |_|  \__,_|_| |_| |_| |_.__/ \___/ \__|
#                    __/ |                 ______
#                   |___/                 |______|
# https://www.home-assistant.io/components/polling/
telegram_bot:
  - platform: polling
    api_key: !secret tg_api
    parse_mode: html
    allowed_chat_ids:
      - !secret tg_chat_idr
      - !secret tg_chat_idf
    # Parse mode HTMN
    # <b>bold</b>, <strong>bold</strong>
    # <i>italic</i>, <em>italic</em>
    # <a href="http://www.example.com/">inline URL</a>
    # <a href="tg://user?id=123456789">inline mention of a user</a>
    # <code>inline fixed-width code</code>
    # <pre>pre-formatted fixed-width code block</pre>


# Notificações
#  _   _       _   _  __
# | \ | |     | | (_)/ _|
# |  \| | ___ | |_ _| |_ _   _
# | . ` |/ _ \| __| |  _| | | |
# | |\  | (_) | |_| | | | |_| |
# |_| \_|\___/ \__|_|_|  \__, |
#                         __/ |
#                        |___/
# https://www.home-assistant.io/components/notify/
notify:
  - name: callmebot
    platform: command_line
    command: 'wget $(cat) -O /dev/null'
  - name: telegramrudi
    platform: telegram
    chat_id: !secret tg_chat_idr
  - name: telegramflavia
    platform: telegram
    chat_id: !secret tg_chat_idf
  - name: telegramtodos
    platform: group
    services:
      - service: telegramrudi
      - service: telegramflavia
  - platform: html5
    name: pushhtml5
    vapid_pub_key: !secret vapid_pub_key
    vapid_prv_key: !secret vapid_prv_key
    vapid_email: !secret gmail_user
#  - name: twilio
#    platform: twilio_call
#    from_number: !secret twilio_numero

# Alarme da casa
#           _                         _____            _             _   _____                 _
#     /\   | |                       / ____|          | |           | | |  __ \               | |
#    /  \  | | __ _ _ __ _ __ ___   | |     ___  _ __ | |_ _ __ ___ | | | |__) |_ _ _ __   ___| |
#   / /\ \ | |/ _` | '__| '_ ` _ \  | |    / _ \| '_ \| __| '__/ _ \| | |  ___/ _` | '_ \ / _ \ |
#  / ____ \| | (_| | |  | | | | | | | |___| (_) | | | | |_| | | (_) | | | |  | (_| | | | |  __/ |
# /_/    \_\_|\__,_|_|  |_| |_| |_|  \_____\___/|_| |_|\__|_|  \___/|_| |_|   \__,_|_| |_|\___|_|
# https://www.home-assistant.io/components/alarm_control_panel/
# https://www.home-assistant.io/integrations/manual
alarm_control_panel:
  - platform: manual
    name: Alarme da Casa
    code: !secret senha_alarme
    arming_time: 10
    delay_time: 5
    trigger_time: 4
    disarmed:
      trigger_time: 0
    armed_away:
      delay_time: 0

# Previsao do tempo
# __          __        _   _
# \ \        / /       | | | |
#  \ \  /\  / /__  __ _| |_| |__   ___ _ __
#   \ \/  \/ / _ \/ _` | __| '_ \ / _ \ '__|
#    \  /\  /  __/ (_| | |_| | | |  __/ |
#     \/  \/ \___|\__,_|\__|_| |_|\___|_|
# https://www.home-assistant.io/components/weather/
weather:
  - platform: darksky
    api_key: !secret api_darksky

# Custom componente para Broadlink
#   _____                      _   _         __              _                __
#  / ____|                    | | (_)       / /             | |               \ \
# | (___  _ __ ___   __ _ _ __| |_ _ _ __  | | ___ _   _ ___| |_ ___  _ __ ___ | |
#  \___ \| '_ ` _ \ / _` | '__| __| | '__| | |/ __| | | / __| __/ _ \| '_ ` _ \| |
#  ____) | | | | | | (_| | |  | |_| | |    | | (__| |_| \__ \ || (_) | | | | | | |
# |_____/|_| |_| |_|\__,_|_|   \__|_|_|    | |\___|\__,_|___/\__\___/|_| |_| |_| |
#                                           \_\                               /_/
# # https://github.com/smartHomeHub/SmartIR
smartir:

# Climatização
#   _____ _ _                 _
#  / ____| (_)               | |
# | |    | |_ _ __ ___   __ _| |_ ___
# | |    | | | '_ ` _ \ / _` | __/ _ \
# | |____| | | | | | | | (_| | ||  __/
#  \_____|_|_|_| |_| |_|\__,_|\__\___|
# https://www.home-assistant.io/components/climate/
climate:
  - platform: smartir
    name: "Climatizador"
    unique_id: climatizador
    device_code: 1360
    controller_data: 192.168.87.8
    temperature_sensor: sensor.suite_temperatura
    humidity_sensor: sensor.suite_umidade
    #power_sensor: switch.climatizador
  - platform: smartir
    name: "Ar da Cozinha"
    unique_id: arcozinha
    device_code: 1702
    controller_data: 192.168.87.7
    temperature_sensor: sensor.cozinha_temperatura
    humidity_sensor: sensor.suite_umidade
    #power_sensor: switch.climatizador
  - platform: smartir
    name: "Ar da Sala"
    unique_id: arsala
    device_code: 1702
    controller_data: 192.168.87.251
    temperature_sensor: sensor.cozinha_temperatura
    humidity_sensor: sensor.suite_umidade
    #power_sensor: switch.climatizador

# Ventiladores
#  ______
# |  ____|
# | |__ __ _ _ __
# |  __/ _` | '_ \
# | | | (_| | | | |
# |_|  \__,_|_| |_|
# https://www.home-assistant.io/components/fan/
fan:
    #Vusando para fazer uso da ventilação do "climate.climatizador"
  - platform: smartir
    name:  Ventilação quarto
    unique_id: ar_do_aquirto
    device_code: 1999
    controller_data: 192.168.87.8
    #power_sensor: switch.climatizador

#  _____  _       _              __ _
# |  __ \(_)     | |            / _| |
# | |  | |_  __ _| | ___   __ _| |_| | _____      __
# | |  | | |/ _` | |/ _ \ / _` |  _| |/ _ \ \ /\ / /
# | |__| | | (_| | | (_) | (_| | | | | (_) \ V  V /
# |_____/|_|\__,_|_|\___/ \__, |_| |_|\___/ \_/\_/
#                          __/ |
#                         |___/
# https://www.home-assistant.io/components/dialogflow/
dialogflow:

# O intent_scriptcomponente permite que os usuários configurem ações e respostas a intenções. As intenções podem ser acionadas por qualquer componente que suporte isso.
#  _____       _             _      _____           _       _
# |_   _|     | |           | |    / ____|         (_)     | |
#   | |  _ __ | |_ ___ _ __ | |_  | (___   ___ _ __ _ _ __ | |_
#   | | | '_ \| __/ _ \ '_ \| __|  \___ \ / __| '__| | '_ \| __|
#  _| |_| | | | ||  __/ | | | |_   ____) | (__| |  | | |_) | |_
# |_____|_| |_|\__\___|_| |_|\__| |_____/ \___|_|  |_| .__/ \__|
#                                                    |_|
# https://www.home-assistant.io/components/intent_script/
# https://www.home-assistant.io/components/dialogflow/
intent_script:
  default:
    speech:
      text: >
        {{ [
        "E aí! Qual vai ser?",
        "Opa tudo bom guri! O que você deseja?",
        ] | random }}
  AteLogo:
    speech:
      text: >
        {{ [
        "OK. Se precisar é só me chamar.",
        "Falou! Tô indo nessa!",
        "Até logo!",
        "Até mais!",
        ] | random }}
  Temperaturasuite:
    speech:
      text: A temperatura externa é {{ states('sensor.dark_sky_temperature') }} graus. Na suíte está {{ states('sensor.suite_temperatura') }} graus. Quer ligar o climatizador no quarto?
  LocalizacaoFlavia:
    speech:
      text: >
          {% if is_state('device_tracker.life360_flavia_cristine_vendruscolo', 'home') %}
            A Flávia está em casa! Celular {{ states.sensor.bateria_status_flavia.state }} e bateria em {{ states.device_tracker.life360_flavia_cristine_vendruscolo.attributes.battery|int }}%
          {% else %}
            Flávia se localiza em {{ states.device_tracker.life360_flavia_cristine_vendruscolo.attributes.address }}. Celular: {{ states.sensor.bateria_status_flavia.state }} e bateria em {{ states.device_tracker.life360_flavia_cristine_vendruscolo.attributes.battery|int }}%
          {% endif %}
  LocalizacaoRudi:
    speech:
      text: >
          {% if is_state('device_tracker.life360_rudimar_remontti', 'home') %}
          Rudi está em Casa! Celular {{ states.sensor.bateria_status_rudi.state }} e bateria em {{ states.device_tracker.life360_rudimar_remontti.attributes.battery|int }}%
          {% else %}
           Rudi está com a bateria em {{ states.device_tracker.life360_rudimar_remontti.attributes.battery|int }}% e se localiza em {{ states.device_tracker.life360_rudimar_remontti.attributes.address }}. Celular: {{ states.sensor.bateria_status_rudi.state }}
          {% endif %}
  MaisVolumeQuarto:
    speech:
      text: aumentando
    action:
      - service: script.tv_quarto_vol_up
      - service: script.tv_quarto_vol_up
  MenosVolumeQuarto:
    speech:
      text: diminuindo
    action:
      - service: script.tv_quarto_vol_down
      - service: script.tv_quarto_vol_down
  LigarClimatizador:
    speech:
      text: OK, Ligando em modo auto!
    action:
      - service: climate.set_operation_mode
        data:
          entity_id: climate.climatizador
          operation_mode: auto
  ResumoAgua:
    speech:
      text: >
        A caixa d'água está em {{states('sensor.caixa_dagua')}}%, {{states('sensor.caixa_dagua_litros')}} litros. 
        Hoje foram gasto aproximadamente {{states('sensor.agua_gasta_dia')}} litros, um gasto de R$ {{states('sensor.agua_gasta_valor_dia')}}. 
        No mês {{states('sensor.agua_gasta_mes')}} litros, R$ {{states('sensor.agua_gasta_valor_mes')}}
  ResumoEnergia:
    speech:
      text: >
        Tensão atual é {{ states('sensor.voltagem') }} volts. No momento a casa está consumindo {{ states('sensor.watts') }} watts.
        Hoje você já gastou {{ states('sensor.energia_gasta_dia') }} reais. 
        E no mês {{ states('sensor.gasto_mes') }} reais.
#        Sua tensão atual é de {{ states('sensor.voltagem') }} volts. No momento a casa está consumindo {{ states('sensor.watts') }} watts.
#        Hoje você já gastou {{ states('sensor.energia_gasta_dia') }} reais, ontém {{ states('sensor.energia_gasta_ontem') }} reais. E desde o dia primeiro seu gasto é de {{ states('sensor.gasto_mes') }} reais.
#        {% if states('sensor.voltagem')|float > 2000 %}
#          Prepara o dinheiro porque a conta vai ser bem salgada se manter esse consumo.
#        {% elif states('sensor.voltagem')|float > 800 %}        
#          Que por sinal fará sua conta chegar salgada.
#        {% elif states('sensor.voltagem')|float > 300 %}        
#          O que parece normal.
#        {% elif states('sensor.voltagem')|float > 1 %}
#          Um consumo muito bom.
#        {%- else -%}
#          Não desperdice energia à toa!
#        {% endif %}
  VoltagemAtual:
    speech:
      text: >
        A tensão neste momento é de {{ states('sensor.voltagem') }} volts.
  WattsAtual:
    speech:
      text: >
        No momento você está consumindo {{ states('sensor.watts') }} watts.
  LitrosCaixaDagua:
    speech:
      text: >
        Sua caixa dágua tem {{ states('sensor.caixa_dagua_litros') }} litros.
  NivelCaixaDagua:
    speech:
      text: >
        Nível da caixa dágua é de {{ states('sensor.caixa_dagua') }} %.
  GastosAgua:
    speech:
      text: >
        Hoje você já gastou {{ states('sensor.agua_gasta_dia') }} litros, e neste mês {{ states('sensor.agua_gasta_mes') }} litros.


 

# Shell Commands
#   _____ _          _ _    _____                                          _
#  / ____| |        | | |  / ____|                                        | |
# | (___ | |__   ___| | | | |     ___  _ __ ___  _ __ ___   __ _ _ __   __| |___
#  \___ \| '_ \ / _ \ | | | |    / _ \| '_ ` _ \| '_ ` _ \ / _` | '_ \ / _` / __|
#  ____) | | | |  __/ | | | |___| (_) | | | | | | | | | | | (_| | | | | (_| \__ \
# |_____/|_| |_|\___|_|_|  \_____\___/|_| |_| |_|_| |_| |_|\__,_|_| |_|\__,_|___/
# https://www.home-assistant.io/components/shell_command/
shell_command:
  wascam_posicao_1: !secret shell_wascam_posicao_1
  wascam_posicao_2: !secret shell_wascam_posicao_2
  wascam_posicao_3: !secret shell_wascam_posicao_3
  telegram_call: '/usr/bin/wget {{ url }} -O /dev/null'

# Streaming (camera.play_stream)
#   _____ _
#  / ____| |
# | (___ | |_ _ __ ___  __ _ _ __ ___
#  \___ \| __| '__/ _ \/ _` | '_ ` _ \
#  ____) | |_| | |  __/ (_| | | | | | |
# |_____/ \__|_|  \___|\__,_|_| |_| |_|
# https://www.home-assistant.io/components/stream/
stream:

# Lista de Compras
#   _____ _                       _               _      _     _
#  / ____| |                     (_)             | |    (_)   | |
# | (___ | |__   ___  _ __  _ __  _ _ __   __ _  | |     _ ___| |_
#  \___ \| '_ \ / _ \| '_ \| '_ \| | '_ \ / _` | | |    | / __| __|
#  ____) | | | | (_) | |_) | |_) | | | | | (_| | | |____| \__ \ |_
# |_____/|_| |_|\___/| .__/| .__/|_|_| |_|\__, | |______|_|___/\__|
#                    | |   | |             __/ |
#                    |_|   |_|            |___/
# https://www.home-assistant.io/components/shopping_list/
shopping_list:

# Informações sobre o sistema e seus componentes. Também permite executar ferramentas de diagnóstico para diagnosticar problemas.
#   _____           _                   _                _ _   _
#  / ____|         | |                 | |              | | | | |
# | (___  _   _ ___| |_ ___ _ __ ___   | |__   ___  __ _| | |_| |__
#  \___ \| | | / __| __/ _ \ '_ ` _ \  | '_ \ / _ \/ _` | | __| '_ \
#  ____) | |_| \__ \ ||  __/ | | | | | | | | |  __/ (_| | | |_| | | |
# |_____/ \__, |___/\__\___|_| |_| |_| |_| |_|\___|\__,_|_|\__|_| |_|
#          __/ |
#         |___/
# https://www.home-assistant.io/components/system_health/
system_health:

#  _______       _ _ _       
# |__   __|     (_) (_)      
#    | |_      ___| |_  ___  
#    | \ \ /\ / / | | |/ _ \ 
#    | |\ V  V /| | | | (_) |
#    |_| \_/\_/ |_|_|_|\___/ 
# https://www.home-assistant.io/components/twilio/
twilio:
  account_sid: !secret twilio_account_sid
  auth_token: !secret twilio_token

#  _      _  __     ____    __   ___  
# | |    (_)/ _|   |___ \  / /  / _ \ 
# | |     _| |_ ___  __) |/ /_ | | | |
# | |    | |  _/ _ \|__ <| '_ \| | | |
# | |____| | ||  __/___) | (_) | |_| |
# |______|_|_| \___|____/ \___/ \___/ 
# https://www.home-assistant.io/components/life360/ 
#
life360:
#  accounts:
#    - username: !secret gmail_user
#      password: !secret life_360_pass
  driving_speed: 18
  interval_seconds: 10
  max_gps_accuracy: 200
  max_update_wait:
    minutes: 45
  show_as_state:
    - driving
    - moving
  warning_threshold: 2
  error_threshold: 3

#  _______ 
# |__   __(_)                    
#    | |   _ _ __ ___   ___ _ __ 
#    | |  | | '_ ` _ \ / _ \ '__|
#    | |  | | | | | | |  __/ |   
#    |_|  |_|_| |_| |_|\___|_|   
# https://www.home-assistant.io/integrations/timer/
#
timer:
  timer_lavabo:
  timer_social:
  timer_suite:
  timer_corredor:
  timer_closet:

# Grupos
#   _____
#  / ____|
# | |  __ _ __ ___  _   _ _ __
# | | |_ | '__/ _ \| | | | '_ \
# | |__| | | | (_) | |_| | |_) |
#  \_____|_|  \___/ \__,_| .__/
#                        | |
#                        |_|
# https://www.home-assistant.io/components/group/
group: !include groups.yaml

# Automações
#                _                        _   _
#     /\        | |                      | | (_)
#    /  \  _   _| |_ ___  _ __ ___   __ _| |_ _  ___  _ __
#   / /\ \| | | | __/ _ \| '_ ` _ \ / _` | __| |/ _ \| '_ \
#  / ____ \ |_| | || (_) | | | | | | (_| | |_| | (_) | | | |
# /_/    \_\__,_|\__\___/|_| |_| |_|\__,_|\__|_|\___/|_| |_|
# https://www.home-assistant.io/components/automation/
# https://www.home-assistant.io/docs/automation/examples/
# https://www.home-assistant.io/cookbook/
automation: !include automations.yaml

# Scripts
#   _____           _       _
#  / ____|         (_)     | |
# | (___   ___ _ __ _ _ __ | |
#  \___ \ / __| '__| | '_ \| __|
#  ____) | (__| |  | | |_) | |_
# |_____/ \___|_|  |_| .__/ \__|
#                    |_|
# https://www.home-assistant.io/components/script/
# https://www.home-assistant.io/docs/scripts/
script: !include scripts.yaml

#  _______        _     _                    _____  _____ _____ _____
# |__   __|      | |   | |            /\    / ____|/ ____|_   _|_   _|
#    | | _____  _| |_  | |_ ___      /  \  | (___ | |      | |   | |
#    | |/ _ \ \/ / __| | __/ _ \    / /\ \  \___ \| |      | |   | |
#    | |  __/>  <| |_  | || (_) |  / ____ \ ____) | |____ _| |_ _| |_
#    |_|\___/_/\_\\__|  \__\___/  /_/    \_\_____/ \_____|_____|_____|
#
#   http://patorjk.com/software/taag/#p=display&f=Big&t=Home-Assistant
